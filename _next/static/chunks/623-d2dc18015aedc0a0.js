(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{56299:function(d,b,a){"use strict";a.d(b,{X:function(){return j}});var e=a(11527),c=a(50959),f=a(11530),g=a(9594),h=a(18921);function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var j=function(a){var b=a.shouldTrack,c=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["shouldTrack"]);return b?(0,e.jsx)(k,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){i(d,a,c[a])})}return d}({},c)):(0,e.jsx)(e.Fragment,{children:a.children})},k=(0,c.memo)(function(b){var a=(0,c.useState)(!1),d=a[0],j=a[1],k=(0,h.ez)().event,i=(0,f.YD)({initialInView:!1,triggerOnce:!0,onChange:function(d){if(d){var a,c;j(!0),k({action:null!==(c=b.action)&& void 0!==c?c:g.b.Impression,label:b.trackerMessage}),null===(a=b.onTrack)|| void 0===a||a.call(b)}}}).ref;return(0,e.jsxs)(e.Fragment,{children:[b.children,!d&&(0,e.jsx)("div",{ref:i})]})})},75177:function(f,b,a){"use strict";a.d(b,{q:function(){return n}});var g=a(11527),h=a(45924),c=a(42475),i=a.n(c),d=a(50959),j=a(75701),e=a(7344),k=a.n(e);function l(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function m(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){l(d,a,c[a])})}return d}var n=(0,d.memo)(function(a){var b=a.useRandomColor,q=void 0===b||b,c=a.shadow,e=a.lazy,f=void 0===e||e,r=(0,d.useRef)(null),s=(0,d.useMemo)(function(){return q?i()({luminosity:"light",seed:a.src}):"var(--gray)"},[a.src,q]),l=(0,d.useState)(!f),n=l[0],v=l[1],o=a.wrapperProps,p=void 0===o?{}:o,t=p.className,u=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(p,["className"]);return(0,g.jsx)("div",m({className:(0,h.W)(k()["avatar-wrap"],(void 0===c||c)&&k().shadow,t),ref:r,style:a.size?{height:"".concat(a.size,"px"),width:"".concat(a.size,"px")}:void 0},u,{children:(0,d.createElement)(a.url?"a":"div",m({style:{backgroundColor:n?void 0:s},className:k().avatar},a.url?{href:a.url,target:"_blank",rel:"noreferrer"}:{},{children:a.imageUrl?(0,g.jsx)("div",{className:k().image,style:{opacity:n?1:0},children:(0,g.jsx)("img",{src:a.imageUrl,height:a.size,width:a.size,onLoad:function(){return v(!0)},loading:f?"lazy":"eager"})}):a.text?(0,g.jsx)("div",{className:"flex flex-grow relative h-full w-full items-center justify-center",children:(0,g.jsx)(j.I,{size:.8,text:a.text})}):null}))}))})},75701:function(d,b,a){"use strict";a.d(b,{I:function(){return f}});var e=a(11527),c=a(50959),f=(0,c.memo)(function(a){var d=(0,c.useRef)(null),b=(0,c.useState)(!1),f=b[0],g=b[1];return(0,c.useEffect)(function(){if(d.current){var c,e=d.current,b=e.parentElement;return b&&(c=new ResizeObserver(function(){var c=b.getBoundingClientRect().width;e.style.fontSize="".concat(c/a.text.length*a.size,"px"),g(!0)})).observe(b),function(){c&&c.disconnect()}}},[a.size]),(0,e.jsx)("span",{ref:d,className:f?"":"invisible",children:a.text})})},4345:function(d,b,a){"use strict";a.d(b,{i:function(){return i}});var e=a(11527),c=a(71384),f=a.n(c),g=a(50959),h=a(55586),i=function(a){var b=(0,g.useState)((0,h.eM)(a.date)),d=b[0],j=b[1],c=a.displayAbsoluteTimeAfterDay,i=void 0===c?29:c;return(0,g.useEffect)(function(){j((0,h.eM)(a.date));var b=setInterval(function(){j((0,h.eM)(a.date))},1e3);return Math.abs(f()(a.date).diff(new Date,"d"))>i&&(b=clearInterval(b),j((0,h.sG)(a.date,"YY \u5E74 M \u6708 D \u65E5"))),function(){b=clearInterval(b)}},[a.date,i]),(0,e.jsx)(e.Fragment,{children:d})}},70623:function(h,c,a){"use strict";a.d(c,{q:function(){return b}});var d=a(10025),i=a.n(d),e=a(50959),j=a(44478),k=a(33194),l=a(11527),m=a(56299),n=a(75177),o=a(4345),p=a(41548),q={className:"!border-none !shadow-none"},r=(0,e.memo)(function(a){var b,g=p.h.userStore,c=a.description,d=a.text,f=a.title,h=(0,e.useRef)(new Date);return(0,l.jsx)(m.X,{trackerMessage:"Toast \u66DD\u5149 - ".concat(f," \xb7 ").concat(c," \xb7 ").concat(d),children:(0,l.jsxs)("div",{className:"relative flex space-x-4 items-center p-4 w-full text-[12px] bg-bg-opacity overflow-hidden text-inherit border border-shallow border-opacity-50 rounded-xl backdrop-filter backdrop-brightness-150 backdrop-brightness-110 backdrop-saturate-150 backdrop-blur-md select-none cursor-pointer mb-4",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)(n.q,{useRandomColor:!1,imageUrl:(null===(b=g.master)|| void 0===b?void 0:b.avatar)||"",size:40,wrapperProps:q})}),(0,l.jsxs)("div",{className:"flex-grow relative flex-shrink min-w-0 break-all leading-[1.5] pr-10",children:[(0,l.jsx)("p",{className:"text-[1.05em] leading-none font-medium truncate",children:f}),d&&(0,l.jsx)("p",{className:"line-clamp-2",children:(0,l.jsx)("span",{children:d})}),c&&(0,l.jsx)("p",{className:"text-gray-2 line-clamp-2",children:c})]}),(0,l.jsx)("div",{className:"absolute right-4 top-4 text-[0.8em] self-start text-gray-2",children:(0,l.jsx)(o.i,{date:h.current})})]})})}),s=a(9594),t=a(18921),f=a(79461);function u(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function v(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){g(d,a,c[a])})}return d}var b=function(){"use strict";var a,b,c;function d(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),g(this,"isInit",!1),g(this,"$wrap",void 0)}return a=d,b=[{key:"initNotice",value:function(){return(0,f.s$)()?new Promise(function(a){return a(!1)}):(this.$wrap||(this.$wrap=document.createElement("div"),document.documentElement.appendChild(this.$wrap),(0,j.createRoot)(this.$wrap).render(e.createElement(k.Ix,{autoClose:3e3,pauseOnHover:!0,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,closeButton:!1,toastClassName:function(){return""},bodyClassName:function(){return""},style:{width:350}}))),new Promise(function(b){if(!(0,f.s$)()){if("Notification"in window){if("denied"!==Notification.permission)try{Notification.requestPermission().then(function(a){return(0,t.DO)({action:s.b.Interaction,label:"granted"==a?"\u901A\u77E5\u5F00\u542F":"\u62D2\u7EDD\u5F00\u542F\u901A\u77E5"}),"granted"==a?b(!0):b(!1)})}catch(d){var c,a;if(c=d,null!=(a=TypeError)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](c):c instanceof a)Notification.requestPermission(function(a){return"granted"===a?b(!0):b(!1)});else throw d}else{if("denied"===Notification.permission)return b(!1);b(!0)}}else b(!1)}}))}},{key:"notice",value:function(a){var d,e=a.title,g=a.text,h=a.description,b=a.onclick,j=void 0===b?null:b,c=a.options,k=void 0===c?{}:c,l=this;return(d=i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(l.isInit){a.next=4;break}return a.next=3,l.initNotice();case 3:l.isInit=a.sent;case 4:return(document.hasFocus()||f.r8)&&l.createFrameNotification({title:g,text:h,duration:5e3,onclick:j}),a.abrupt("return",new Promise(function(a){l.initNotice().then(function(d){if(d&&!document.hasFocus()){(0,t.DO)({action:s.b.Interaction,label:"\u5916\u90E8\u901A\u77E5\u89E6\u53D1"});var b,c=new Notification(e,w({body:g,image:(null===(b=p.h.userStore.master)|| void 0===b?void 0:b.avatar)||"".concat(location.origin,"/manifest-icon-192.png")},k));c.onclick=function(a){null==j||j(a),c.close()},a(c)}})}));case 6:case"end":return a.stop()}},a)}),function(){var a=this,b=arguments;return new Promise(function(e,f){var g=d.apply(a,b);function c(a){u(g,e,f,c,h,"next",a)}function h(a){u(g,e,f,c,h,"throw",a)}c(void 0)})})()}},{key:"createFrameNotification",value:function(a){var d=a.text,g=a.title,b=a.duration,h=void 0===b?5e3:b,c=a.onclick,i=void 0===c?null:c,j=a.description;(0,f.s$)()||requestAnimationFrame(function(){(0,t.DO)({action:s.b.Interaction,label:"\u5185\u5D4C\u901A\u77E5\u89E6\u53D1"}),(0,k.Am)(e.createElement(r,{text:d,title:g,description:j}),{autoClose:h,onClick:function(a){null==i||i(a.nativeEvent)}})})}}],v(a.prototype,b),c&&v(a,c),d}();g(b,"shared",new b),(0,f.s$)()||(window.n=b.shared)},55586:function(k,e,b){"use strict";b.d(e,{IW:function(){return p},T8:function(){return q},WZ:function(){return r},eM:function(){return m},fJ:function(){return o},sG:function(){return l},vz:function(){return n}});var d,f=b(71384),c=b.n(f);b(41279);var a,g=b(70244),h=b.n(g),i=b(70913),j=b.n(i);c().extend(h()),c().extend(j()),c().locale("zh-cn"),(a=d||(d={}))[a["MMM DD YYYY"]=0]="MMM DD YYYY",a[a["HH:mm"]=1]="HH:mm",a[a.LLLL=2]="LLLL",a[a["H:mm:ss A"]=3]="H:mm:ss A",a[a["YYYY-MM-DD"]=4]="YYYY-MM-DD",a[a["YYYY-MM-DD dddd"]=5]="YYYY-MM-DD dddd",a[a["YYYY-MM-DD ddd"]=6]="YYYY-MM-DD ddd",a[a["MM-DD ddd"]=7]="MM-DD ddd";var l=function(a,b){return c()(a).format(b)},m=function(b){var f=arguments.length>1&& void 0!==arguments[1]?arguments[1]:new Date;b=new Date(b);var c=2592e6,d=31536e6,a=+f- +b;if(a<6e4){var e=Math.ceil(a/1e3);return e<=0?"\u521A\u521A":"".concat(e," \u79D2\u524D")}return a<36e5?"".concat(Math.round(a/6e4)," \u5206\u949F\u524D"):a<864e5?"".concat(Math.round(a/36e5)," \u5C0F\u65F6\u524D"):a<c?"".concat(Math.round(a/864e5)," \u5929\u524D"):a<d?"".concat(Math.round(a/c)," \u4E2A\u6708\u524D"):"".concat(Math.round(a/d)," \u5E74\u524D")},n=function(){var a=new Date,b=new Date(a.getFullYear(),0,0),c=a.getTime()-b.getTime();return Math.floor(c/864e5)};function o(b){var a;return(a=null!=b?b:new Date().getFullYear())%400==0||a%100!=0&&a%4==0?366:365}var p=function(){var a=new Date;return a.getSeconds()+60*(a.getMinutes()+60*a.getHours())},q=86400;function r(a){return[60].reduceRight(function(a,b){return function(c){return[Math.floor(c/b)].concat(a(c%b))}},function(a){return[a]})(a).map(function(a){return a.toString().padStart(2,"0")}).join(":")}},7344:function(a){a.exports={avatar:"Avatar_avatar__umGUh",image:"Avatar_image__iwsFj","avatar-wrap":"Avatar_avatar-wrap__E9RcW",shadow:"Avatar_shadow__7Ufnz"}}}])