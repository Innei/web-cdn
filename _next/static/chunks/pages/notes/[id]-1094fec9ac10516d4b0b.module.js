(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{13:function(e,t,n){n("j36g"),e.exports=n("7o6c")},"7o6c":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/[id]",function(){return n("MjEs")}])},"8L9l":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("q1tI"),o=n.n(a),c=n("l73F"),r=n.n(c),i=o.a.createElement,s=e=>{var{number:t}=e,{0:n,1:o}=Object(a.useState)(t),c=Object(a.useRef)(null);return Object(a.useEffect)(()=>{c.current&&n!==t&&(c.current.animate([{transform:"translateY(-1em)"},{transform:"translateY(".concat(t===n+1?-2:0,"em)")}],{duration:500,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).onfinish=()=>{o(t)})},[n,t]),i("div",{className:r.a.recorder,style:{width:"".concat(n.toString().length,"em")}},i("div",{className:r.a.numbers,ref:c},i("span",null,n-1<0?"0":n-1),i("span",null,n),i("span",null,n+1)))}},AIw3:function(e,t,n){"use strict";var a,o;n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return r})),function(e){e.happy="\u5f00\u5fc3",e.sad="\u4f24\u5fc3",e.angry="\u751f\u6c14",e.sorrow="\u60b2\u54c0",e.pain="\u75db\u82e6",e.terrible="\u53ef\u6015",e.unhappy="\u4e0d\u5feb",e.detestable="\u53ef\u6076",e.worry="\u62c5\u5fc3",e.despair="\u7edd\u671b",e.anxiety="\u7126\u8651",e.excite="\u6fc0\u52a8"}(a||(a={})),function(e){e.sunshine="\u6674",e.cloudy="\u591a\u4e91",e.rainy="\u96e8",e.overcast="\u9634",e.snow="\u96ea"}(o||(o={}));var c=Object.freeze(Object.fromEntries(Object.entries(a))),r=Object.freeze(Object.fromEntries(Object.entries(o)))},CBBT:function(e,t,n){"use strict";var a=n("wx14"),o=n("Ff2n"),c=n("q1tI"),r=n.n(c),i=n("8tEE"),s=n("IP2g"),u=n("PL58"),l=n.n(u),d=r.a.createElement;t.a=Object(c.memo)((function(e){var{actions:t=[],informs:n=[],copyright:c=!0}=e,u=Object(o.a)(e,["actions","informs","copyright"]);return d(r.a.Fragment,null,d("div",Object(a.a)({className:"note-inform"},u),n.map((e,t)=>d("span",{key:t},d(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name)),c&&d("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",style:{color:"currentColor"},target:"_blank"},d("span",{title:"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"},d(s.a,{icon:i.e,className:l.a.icon})))),d("div",{className:"note-action",style:{minHeight:"1rem"}},t.map((e,t)=>d("span",{key:t,style:{cursor:"pointer"},onClick:e.callback},d(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name))))}))},MjEs:function(e,t,n){"use strict";n.r(t);var a=n("QpBz"),o=n.n(a),c=n("q1tI"),r=n.n(c),i=n("twK/"),s=n("wHSu"),u=n("zQ19"),l=n("CBBT"),d=n("ib2w"),m=n("9uS9"),p=n("8L9l"),b=n("AauJ"),f=n("dumg"),h=n("ytCK"),w=n("AIw3"),v=n("nOHt"),y=n("AoAR"),j=n("eSIs"),O=e=>{return{sunshine:s.C,cloudy:s.k,overcast:s.i,snow:s.B,rainy:s.j}[e]},g=e=>{return{happy:i.k,sad:i.j,angry:i.a,pain:i.l,sorrow:i.i,unhappy:i.i,excite:i.h,worry:i.f,terrible:i.g,detestable:i.a,despair:i.f,anxiety:i.e}[e]},N=n("TGNx"),k=n("MaJT"),E=n("cBaE"),_=r.a.createElement,x=e=>{var{value:t}=e;return _("span",{className:"indent"},t)},C=Object(h.a)(e=>{var t,n,{data:a,prev:h,next:C}=e,{title:S,_id:T,text:B,mood:Y,weather:I}=a,{userStore:H,appStore:L}=Object(u.c)(),{0:M,1:P}=Object(c.useState)(null!==(t=a.count.like)&&void 0!==t?t:0),A=Object(v.useRouter)(),{0:D,1:R}=Object(c.useState)("");Object(c.useEffect)(()=>(document.oncopy=e=>{H.isLogged||(e.preventDefault(),o.a.warn("\u7981\u6b62\u590d\u5236!"))},()=>{document.oncopy=null}),[H.isLogged]);var{description:z,wordCount:F}=Object(E.e)(B,{count:!0});Object(c.useEffect)(()=>{try{R("\u521b\u5efa\u4e8e ".concat(Object(j.a)(a.created,"YYYY-MM-DD dddd"),", \u4fee\u6539\u4e8e ").concat(Object(j.a)(a.modified,"YYYY-MM-DD dddd"),", \u5168\u6587\u5b57\u6570: ").concat(F,", \u9605\u8bfb\u6b21\u6570: ").concat(a.count.read,", \u559c\u6b22\u6b21\u6570: ").concat(a.count.like))}catch(e){}},[B,a.created,a.modified,a.count.read,a.count.like,F]),Object(c.useEffect)(()=>{var t;document.documentElement.scrollTop>50&&(document.documentElement.scrollTop=50),setTimeout(()=>{window.scroll({top:0,left:0,behavior:"smooth"})},10),P(null!==(t=e.data.count.like)&&void 0!==t?t:0)},[e]);var{0:q,1:J}=Object(c.useState)(!1),G={informs:[],actions:[{name:_(p.a,{number:M||0}),icon:s.t,color:M-1===a.count.like||q?"#e74c3c":void 0,callback:()=>{if(M-1===a.count.like)return o.a.error("\u4f60\u5df2\u7ecf\u559c\u6b22\u8fc7\u5566!");Object(y.a)("Note").get("like/"+T,{withCredentials:!0}).then(()=>{o.a.success("\u611f\u8c22\u559c\u6b22!"),P(M+1)}).catch(()=>{J(!0)})}}]};return I&&Object.keys(w.c).includes(I)?G.informs.push({name:w.d[I],icon:O(I)}):I&&G.informs.push({name:I,icon:s.i}),Y&&Object.keys(w.a).includes(Y)?G.informs.push({name:w.b[Y],icon:g(Y)}):Y&&G.informs.push({name:Y,icon:i.k}),G.informs.push({name:H.name,icon:s.H},{name:Object(j.b)(a.created),icon:s.h},{name:a.count.read.toString(),icon:s.d}),Object(c.useEffect)(()=>(L.headerNav={title:S,meta:"\u65e5\u8bb0",show:!0},()=>{L.headerNav.show=!1}),[L,S]),_(r.a.Fragment,null,_(k.b,{title:S,description:z,openGraph:{title:S,description:z,profile:{username:H.name}}}),_(f.a,{title:S,date:new Date(a.created),tips:D},_(N.a.Provider,{value:e.data.images},_(m.a,{value:B,escapeHtml:!1,renderers:{text:x}})),_(l.a,G),(!!C||!!h)&&_("section",{className:"paul-more"},!!C&&_("button",{className:"btn green",onClick:()=>{A.push("/notes/[id]","/notes/".concat(C.nid))}},"\u524d\u4e00\u7bc7"),_("button",{className:"btn yellow",onClick:()=>{window.scrollTo({left:0,top:0,behavior:"smooth"}),A.push("/timeline?type=note")}},"\u65f6\u95f4\u7ebf"),!!h&&_("button",{className:"btn green",onClick:()=>{A.push("/notes/[id]","/notes/".concat(h.nid))}},"\u540e\u4e00\u7bc7"))),_(b.a,{style:{minHeight:"unset",paddingTop:"0"},delay:2e3},_(d.c,{type:"Note",id:T,allowComment:null===(n=e.data.allowComment)||void 0===n||n})))});C.getInitialProps=async e=>{var{query:t}=e,n=t.id,{data:a,prev:o,next:c}=await Object(y.a)("Note","nid").get(n);return{data:a,prev:o,next:c}};t.default=C},PL58:function(e,t,n){e.exports={icon:"Action_icon__3BtwG"}},l73F:function(e,t,n){e.exports={recorder:"NumberRecorder_recorder__3RxBH",numbers:"NumberRecorder_numbers__2L9ZB"}}},[[13,1,0,7,4,3,2,5,6,9,10,8,12,11,13,14,15,16,17,18]]]);