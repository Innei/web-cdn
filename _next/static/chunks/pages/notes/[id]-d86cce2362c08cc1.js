(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245,818],{10894:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/[id]",function(){return c(79462)}])},88198:function(c,b,a){"use strict";a.d(b,{i:function(){return j},x:function(){return k}});var d=a(11527),e=a(45924);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){f(d,a,c[a])})}return d}function h(a,d){if(null==a)return{};var b,c,e=i(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function i(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var j=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("hr",g({className:(0,e.W)("border-0 h-[0.5px] my-4 !bg-opacity-30 bg-black dark:bg-white",b)},c))},k=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("span",g({className:(0,e.W)("!bg-opacity-30 bg-black dark:bg-white inline-block h-full mx-4 w-[0.5px] text-transparent",b)},c,{children:"w"}))}},27375:function(d,b,a){"use strict";a.d(b,{d:function(){return h}});var e=a(11527),f=a(45924),c=a(56710),g=a.n(c),h=function(a){var b=a.checked,c=a.width,d=a.className;return(0,e.jsx)("div",{className:(0,f.W)(g()["like-button"],b?g().checked:"",d),children:(0,e.jsx)("label",{htmlFor:"checkbox",children:(0,e.jsx)("svg",{style:{width:c},id:"heart-svg",viewBox:"467 392 58 57",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsxs)("g",{id:"Group",fill:"none",fillRule:"evenodd",transform:"translate(467 392)",children:[(0,e.jsx)("path",{d:"M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z",id:"heart",fill:"currentColor"}),(0,e.jsx)("circle",{id:"main-circ",fill:"#E2264D",opacity:"0",cx:"29.5",cy:"29.5",r:"1.5"}),(0,e.jsxs)("g",{id:"grp7",opacity:"0",transform:"translate(7 6)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#9CD8C3",cx:"2",cy:"6",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#8CE8C3",cx:"5",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp6",opacity:"0",transform:"translate(0 28)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#CC8EF5",cx:"2",cy:"7",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#91D2FA",cx:"3",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp3",opacity:"0",transform:"translate(52 28)",children:[(0,e.jsx)("circle",{id:"oval2",fill:"#9CD8C3",cx:"2",cy:"7",r:"2"}),(0,e.jsx)("circle",{id:"oval1",fill:"#8CE8C3",cx:"4",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp2",opacity:"0",transform:"translate(44 6)",children:[(0,e.jsx)("circle",{id:"oval2",fill:"#CC8EF5",cx:"5",cy:"6",r:"2"}),(0,e.jsx)("circle",{id:"oval1",fill:"#CC8EF5",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp5",opacity:"0",transform:"translate(14 50)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#91D2FA",cx:"6",cy:"5",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#91D2FA",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp4",opacity:"0",transform:"translate(35 50)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#F48EA7",cx:"6",cy:"5",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#F48EA7",cx:"2",cy:"2",r:"2"})]}),(0,e.jsxs)("g",{id:"grp1",opacity:"0",transform:"translate(24)",children:[(0,e.jsx)("circle",{id:"oval1",fill:"#9FC7FA",cx:"2.5",cy:"3",r:"2"}),(0,e.jsx)("circle",{id:"oval2",fill:"#9FC7FA",cx:"7.5",cy:"2",r:"2"})]})]})})})})}},91075:function(e,b,a){"use strict";a.d(b,{Z:function(){return i}});var f=a(11527),c=a(50959),d=a(90662),g=a.n(d),h=function(a){var e=a.children,b=a.serverEl,d=(0,c.useState)(!1),g=d[0],h=d[1];return(0,c.useEffect)(function(){h(!0)},[]),(0,f.jsx)(f.Fragment,{children:g?e:b?c.createElement(b):null})},i=(0,c.memo)(function(a){return(0,f.jsx)(h,{children:(0,f.jsx)(g(),{value:a.number,transition:500,className:a.className})})})},33954:function(e,b,a){"use strict";a.d(b,{B:function(){return l}});var f=a(11527),g=a(45924),c=a(50959),h=a(61432),i=a(18833),d=a(63792),j=a.n(d);function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var l=(0,c.memo)(function(a){var b=a.actions,d=a.informs,e=a.copyright,l=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["actions","informs","copyright"]);return(0,f.jsxs)("div",{className:j().root,children:[(0,f.jsxs)("div",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}({className:"note-inform space-x-3"},l,{children:[(void 0===d?[]:d).map(function(a,b){var d=(0,f.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[a.icon&&(0,f.jsx)("span",{className:"flex items-center mr-2",style:{color:a.color},children:a.icon}),a.name]});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return d},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):d},b)}),(void 0===e||e)&&(0,f.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",target:"_blank",className:"inline-flex items-center text-current cursor-pointer",children:(0,f.jsx)("span",{title:"\u521B\u4F5C\u5171\u7528\u4FDD\u7559\u7F72\u540D-\u975E\u5546\u4E1A-\u7981\u6B62\u6F14\u7ECE4.0\u56FD\u9645\u8BB8\u53EF\u8BC1",className:"inline-flex items-center",children:(0,f.jsx)(i.w2,{})})})]})),(0,f.jsx)("div",{className:"note-action min-h-4 space-x-4","data-hide-print":!0,children:(void 0===b?[]:b).map(function(a,b){if(!a)return null;var d=a.wrapperComponent||c.Fragment,e=(0,f.jsx)("span",{className:(0,g.W)(!!a.callback&&"cursor-pointer","inline-flex items-center space-x-2"),onClick:a.callback,children:(0,f.jsxs)(d,{children:[a.icon&&(0,f.jsx)("span",{className:"inline-flex items-center",style:{color:a.color},children:a.icon}),a.name]})});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return e},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):e},b)})})]})}),m=function(a){return"function"==typeof a?(0,c.createElement)(a):a}},21510:function(c,b,a){"use strict";a.d(b,{E:function(){return j}});var d=a(11527),e=a(50959),f=a(48629),g=a(56299),h=a(61432),i=a(48259),j=(0,a(26358).$)(function(c){var a=(0,i.LU)().function.donate.qrcode,b=void 0===a?[]:a,j=(0,e.useMemo)(function(){return(0,d.jsx)(d.Fragment,{children:c.children})},[c.children]);return b.length?(0,d.jsx)(h.r,{wrapperClassNames:"inline-flex items-center",middleware:[(0,f.X5)({autoAlignment:!0}),(0,f.uY)(),(0,f.cv)(10),],triggerComponent:function(){return j},children:(0,d.jsx)(g.X,{trackerMessage:"\u66DD\u5149 - \u8D44\u52A9\u5F39\u5C42",children:(0,d.jsx)("div",{className:"flex space-x-2",children:b.map(function(a){return(0,d.jsx)("img",{src:a,className:"w-[300px]"},a)})})})}):j})},79462:function(t,d,a){"use strict";a.r(d),a.d(d,{"default":function(){return bq}});var h=a(10025),i=a.n(h),u=a(11527),j=a(71384),v=a.n(j),w=a(50279),x=a(18081),y=a(65280),b=a(11048),z=a(41221),e=a(50959),A=a(94788),B=a(86142),C=a(58298),D=a(18833),E=a(27375),F=a(91075),G=a(4345),H=a(33954),I=a(21510);function J(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function K(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){J(d,a,c[a])})}return d}function L(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm-160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm194.8 170.2C334.3 380.4 292.5 400 248 400s-86.3-19.6-114.8-53.8c-13.6-16.3 11-36.7 24.6-20.5c22.4 26.9 55.2 42.2 90.2 42.2s67.8-15.4 90.2-42.2c13.4-16.2 38.1 4.2 24.6 20.5z"})}))}function M(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256c0 90.1 48.2 168.7 120 212.1V288c0-8.8 7.2-16 16-16s16 7.2 16 16v196.7c29.5 12.4 62 19.3 96 19.3s66.5-6.9 96-19.3V288c0-8.8 7.2-16 16-16s16 7.2 16 16v180.1C447.8 424.7 496 346 496 256C496 119 385 8 248 8zm-65.5 216.5c-14.8-13.2-46.2-13.2-61 0L112 233c-3.8 3.3-9.3 4-13.7 1.6c-4.4-2.4-6.9-7.4-6.1-12.4c4-25.2 34.2-42.1 59.9-42.1S208 197 212 222.2c.8 5-1.7 10-6.1 12.4c-5.8 3.1-11.2.7-13.7-1.6l-9.7-8.5zM248 416c-26.5 0-48-28.7-48-64s21.5-64 48-64s48 28.7 48 64s-21.5 64-48 64zm149.8-181.5c-5.8 3.1-11.2.7-13.7-1.6l-9.5-8.5c-14.8-13.2-46.2-13.2-61 0L304 233c-3.8 3.3-9.3 4-13.7 1.6c-4.4-2.4-6.9-7.4-6.1-12.4c4-25.2 34.2-42.1 59.9-42.1S400 197 404 222.2c.6 4.9-1.8 9.9-6.2 12.3z"})}))}function N(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zM152 416c-26.5 0-48-21-48-47c0-20 28.5-60.4 41.6-77.8c3.2-4.3 9.6-4.3 12.8 0C171.5 308.6 200 349 200 369c0 26-21.5 47-48 47zm16-176c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm170.2 154.2C315.8 367.4 282.9 352 248 352c-21.2 0-21.2-32 0-32c44.4 0 86.3 19.6 114.7 53.8c13.8 16.4-11.2 36.5-24.5 20.4z"})}))}function O(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM136 240c0-9.3 4.1-17.5 10.5-23.4l-31-9.3c-8.5-2.5-13.3-11.5-10.7-19.9c2.5-8.5 11.4-13.2 19.9-10.7l80 24c8.5 2.5 13.3 11.5 10.7 19.9c-2.1 6.9-8.4 11.4-15.3 11.4c-.5 0-1.1-.2-1.7-.2c.7 2.7 1.7 5.3 1.7 8.2c0 17.7-14.3 32-32 32S136 257.7 136 240zm168 154.2c-27.8-33.4-84.2-33.4-112.1 0c-13.5 16.3-38.2-4.2-24.6-20.5c20-24 49.4-37.8 80.6-37.8s60.6 13.8 80.6 37.8c13.8 16.5-11.1 36.6-24.5 20.5zm76.6-186.9l-31 9.3c6.3 5.8 10.5 14.1 10.5 23.4c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-2.9.9-5.6 1.7-8.2c-.6.1-1.1.2-1.7.2c-6.9 0-13.2-4.5-15.3-11.4c-2.5-8.5 2.3-17.4 10.7-19.9l80-24c8.4-2.5 17.4 2.3 19.9 10.7c2.5 8.5-2.3 17.4-10.8 19.9z"})}))}function P(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm33.8 189.7l80-48c11.6-6.9 24 7.7 15.4 18L343.6 208l33.6 40.3c8.7 10.4-3.9 24.8-15.4 18l-80-48c-7.7-4.7-7.7-15.9 0-20.6zm-163-30c-8.6-10.3 3.8-24.9 15.4-18l80 48c7.8 4.7 7.8 15.9 0 20.6l-80 48c-11.5 6.8-24-7.6-15.4-18l33.6-40.3l-33.6-40.3zM248 288c51.9 0 115.3 43.8 123.2 106.7c1.7 13.6-8 24.6-17.7 20.4c-25.9-11.1-64.4-17.4-105.5-17.4s-79.6 6.3-105.5 17.4c-9.8 4.2-19.4-7-17.7-20.4C132.7 331.8 196.1 288 248 288z"})}))}function Q(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zm-80 168c17.7 0 32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32zm176 192H152c-21.2 0-21.2-32 0-32h192c21.2 0 21.2 32 0 32zm-16-128c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"})}))}function R(a){return(0,u.jsx)("svg",K({width:"1em",height:"1em",viewBox:"0 0 512 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M409.6 111.9c22.6-3.2 73.5-12 88.3-26.8c19.2-19.2 18.9-50.6-.7-70.2S446-5 426.9 14.2c-14.8 14.8-23.5 65.7-26.8 88.3c-.8 5.5 3.9 10.2 9.5 9.4zM102.4 400.1c-22.6 3.2-73.5 12-88.3 26.8c-19.1 19.1-18.8 50.6.8 70.2s51 19.9 70.2.7c14.8-14.8 23.5-65.7 26.8-88.3c.8-5.5-3.9-10.2-9.5-9.4zm311.7-256.5c-33 3.9-48.6-25.1-45.7-45.7c3.4-24 7.4-42.1 11.5-56.5C285.1-13.4 161.8-.5 80.6 80.6C-.5 161.7-13.4 285 41.4 379.9c14.4-4.1 32.4-8 56.5-11.5c33.2-3.9 48.6 25.2 45.7 45.7c-3.4 24-7.4 42.1-11.5 56.5c94.8 54.8 218.1 41.9 299.3-39.2s94-204.4 39.2-299.3c-14.4 4.1-32.5 8-56.5 11.5zM255.7 106c3.3-13.2 22.4-11.5 23.6 1.8l4.8 52.3l52.3 4.8c13.4 1.2 14.9 20.3 1.8 23.6l-90.5 22.6c-8.9 2.2-16.7-5.9-14.5-14.5l22.5-90.6zm-90.9 230.3L160 284l-52.3-4.8c-13.4-1.2-14.9-20.3-1.8-23.6l90.5-22.6c8.8-2.2 16.7 5.8 14.5 14.5L188.3 338c-3.1 13.2-22.2 11.7-23.5-1.7zm215.7 44.2c-29.3 29.3-75.7 50.4-116.7 50.4c-18.9 0-36.6-4.5-51-14.7c-9.8-6.9-8.7-21.8 2-27.2c28.3-14.6 63.9-42.4 97.8-76.3s61.7-69.6 76.3-97.8c5.4-10.5 20.2-11.9 27.3-2c32.3 45.3 7.1 124.7-35.7 167.6z"})}))}function S(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM136 208c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32zm187.3 183.3c-31.2-9.6-59.4-15.3-75.3-15.3s-44.1 5.7-75.3 15.3c-11.5 3.5-22.5-6.3-20.5-18.1c7-40 60.1-61.2 95.8-61.2s88.8 21.3 95.8 61.2c2 11.9-9.1 21.6-20.5 18.1zM328 240c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"})}))}function T(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM144 400h-8c-17.7 0-32-14.3-32-32v-8h40v40zm0-56h-40v-8c0-17.7 14.3-32 32-32h8v40zm-8-136c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32s-32-14.3-32-32zm72 192h-48v-40h48v40zm0-56h-48v-40h48v40zm64 56h-48v-40h48v40zm0-56h-48v-40h48v40zm64 56h-48v-40h48v40zm0-56h-48v-40h48v40zm-8-104c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32zm64 128c0 17.7-14.3 32-32 32h-8v-40h40v8zm0-24h-40v-40h8c17.7 0 32 14.3 32 32v8z"})}))}function U(a){return(0,u.jsx)("svg",K({width:"0.97em",height:"1em",viewBox:"0 0 496 512"},a,{children:(0,u.jsx)("path",{fill:"currentColor",d:"M344 200c-13.3 0-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24s-10.7-24-24-24zm-192 0c-13.3 0-24 10.7-24 24s10.7 24 24 24s24-10.7 24-24s-10.7-24-24-24zM248 8C111 8 0 119 0 256s111 248 248 248s248-111 248-248S385 8 248 8zM80 224c0-39.8 32.2-72 72-72s72 32.2 72 72s-32.2 72-72 72s-72-32.2-72-72zm232 176H184c-21.2 0-21.2-32 0-32h128c21.2 0 21.2 32 0 32zm32-104c-39.8 0-72-32.2-72-72s32.2-72 72-72s72 32.2 72 72s-32.2 72-72 72z"})}))}var V=a(4897),W=function(a){var b={晴:V.zS,多云:D.T$,阴:D.cA,雪:D.bm,雨:D.DR,雷雨:D.e8};return e.createElement(b[a]||V.zS)},X=a(9594),Y=a(18921),Z=a(48259),$=a(41548);function _(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var aa=(0,b.Pi)(function(j){var g,c,k=j.id,h=(0,$.oR)().noteStore,a=h.get(k),o=(0,e.useRef)(!1),p=(0,Y.ez)().event;if(!a)return null;var l=a.nid,d=a.mood,f=a.weather,m=!!a.secret&&v()(a.secret).isAfter(new Date),i=h.isLiked(l),n=(0,Z.LU)().function.donate,b={informs:[],actions:[n.enable&&{icon:(0,u.jsx)(D.j,{fontSize:"1.2em"}),name:"",wrapperComponent:I.E,callback:function(){window.open(n.link)}},{name:(0,u.jsxs)("div",{className:"inline-flex items-center leading-[1]",children:[(0,u.jsx)("div",{className:"h-[1rem] w-[1rem] relative mr-2",children:(0,u.jsx)(E.d,{checked:i,width:"2rem",className:"absolute inset-0 -translate-y-1/2 -translate-x-1/2 transform "})}),(0,u.jsx)(F.Z,{number:(null===(c=a.count)|| void 0===c?void 0:c.like)||0,className:"ml-4"})]}),color:i?"#e74c3c":void 0,callback:function(){h.like(l),o.current||(p({action:X.b.Interaction,label:"\u65E5\u8BB0\u5E95\u90E8\u559C\u6B22\u89E6\u53D1"}),o.current=!0)}},]};return f&&b.informs.push({name:f,icon:W(f)}),d&&b.informs.push({name:d,icon:(g=d,e.createElement({开心:L,伤心:N,大哭:M,生气:O,痛苦:P,悲哀:Q,不快:Q,激动:R,担心:S,可怕:T,可恶:O,绝望:S,焦虑:U}[g]||L))}),b.informs.push({name:(0,u.jsx)(G.i,{date:a.created}),icon:(0,u.jsx)(D.a4,{}),tip:function(){return(0,u.jsxs)("p",{className:"leading-7",children:["\u521B\u5EFA\u65F6\u95F4\uFF1A",a.created,(0,u.jsx)("br",{}),"\u4FEE\u6539\u4E8E\uFF1A",a.modified||"-"]})}},{name:a.count.read.toString(),icon:(0,u.jsx)(D.NM,{})}),(0,u.jsx)(u.Fragment,{children:!m&&(0,u.jsx)(H.B,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){_(d,a,c[a])})}return d}({},b))})}),ab=a(55883),ac=a(88198),k=a(50225);function ad(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ae(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){ad(d,a,c[a])})}return d}function af(a){return(0,u.jsxs)("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},a,{children:[(0,u.jsx)("path",{fill:"currentColor",d:"M18.29 17.29a.996.996 0 0 0 0-1.41L14.42 12l3.88-3.88a.996.996 0 1 0-1.41-1.41L12.3 11.3a.996.996 0 0 0 0 1.41l4.59 4.59c.38.38 1.01.38 1.4-.01z"}),(0,u.jsx)("path",{fill:"currentColor",d:"M11.7 17.29a.996.996 0 0 0 0-1.41L7.83 12l3.88-3.88a.996.996 0 1 0-1.41-1.41L5.71 11.3a.996.996 0 0 0 0 1.41l4.59 4.59c.38.38 1.01.38 1.4-.01z"})]}))}function ag(a){return(0,u.jsxs)("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},a,{children:[(0,u.jsx)("path",{fill:"currentColor",d:"M5.7 6.71a.996.996 0 0 0 0 1.41L9.58 12L5.7 15.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L7.12 6.71c-.39-.39-1.03-.39-1.42 0z"}),(0,u.jsx)("path",{fill:"currentColor",d:"M12.29 6.71a.996.996 0 0 0 0 1.41L16.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L13.7 6.7c-.38-.38-1.02-.38-1.41.01z"})]}))}function ah(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ai(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var aj=(0,b.Pi)(function(f){var a,b,g=f.id,h=(0,$.oR)().noteStore,c=(a=h.relationMap.get(g)||[ab.Z,ab.Z],b=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return ah(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return ah(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],e=c[1],i=(0,z.useRouter)(),j=(0,Y.ez)().event;return(0,u.jsx)(u.Fragment,{children:(!!e||!!d)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ac.i,{className:"!w-15 m-auto"}),(0,u.jsxs)("section",{className:"mt-4 text-center relative text-gray-1 py-2","data-hide-print":!0,children:[(0,u.jsxs)("div",{className:"flex justify-between items-center children:inline-flex children:items-center children:space-x-2 children:px-2 children:py-2",children:[!!e&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{tabIndex:1,role:"button",className:"hover:text-primary",onClick:function(){i.push("/notes/[id]","/notes/".concat(e.nid))},children:[(0,u.jsx)(af,{}),(0,u.jsx)("span",{children:"\u524D\u4E00\u7BC7"})]})}),!!d&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{tabIndex:1,role:"button",className:"hover:text-primary",onClick:function(){i.push("/notes/[id]","/notes/".concat(d.nid))},children:[(0,u.jsx)(ag,{}),(0,u.jsx)("span",{children:"\u540E\u4E00\u7BC7"})]})})]}),(0,u.jsxs)("div",{tabIndex:1,role:"button",className:"opacity-80 text-pink hover:text-primary absolute left-1/2 top-0 bottom-0 flex items-center -translate-x-1/2 transform space-x-2",onClick:function(){var a=h.get(g);j({action:X.b.Click,label:"\u65F6\u95F4\u7EBF\u70B9\u51FB - ".concat(null==a?void 0:a.nid," - ").concat(null==a?void 0:a.title)}),(0,k.YG)(),i.push("/timeline?type=note&id=".concat(g))},children:[(0,u.jsx)("span",{children:"\u65F6\u95F4\u7EBF"}),(0,u.jsx)(D.a4,{})]})]})]})})}),ak=(0,b.Pi)(function(a){return(0,$.oR)().appUIStore.isNarrowThanLaptop?(0,u.jsx)(aj,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){ai(d,a,c[a])})}return d}({},a)):null}),al=a(56625),am={text:function(a){var b=a.value;return(0,u.jsx)("span",{className:"indent",children:b})}},an=(0,e.memo)(function(a){return(0,u.jsx)(al.U,{value:a.text,escapeHtml:!1,renderers:am,toc:!0})}),ao=a(17828),ap=function(b){var a=(0,e.useRef)(null);return(0,u.jsxs)("div",{className:"flex h-full w-full absolute items-center justify-center flex-col",children:[(0,u.jsx)("p",{children:(0,u.jsx)("strong",{className:"font-medium text-2xl",children:"\u6B64\u6587\u7AE0\u9700\u8981\u5BC6\u7801"})}),(0,u.jsxs)("div",{className:"space-x-3 text-center space-y-3",children:[(0,u.jsx)(ao.I,{ref:a,type:"password"}),(0,u.jsx)("button",{className:"btn yellow flex-shrink-0",onClick:function(){a.current&&b.onSubmit(a.current.value)},children:"\u63D0\u4EA4"})]})]})},l=a(17621),aq=a.n(l),ar=a(32468),as=a(56299),at=a(75177),au=a(61432),av=function(a){if(!a)return"";var b=a.split(" ")[0];return b.length>4?a[0]:b},aw=a(54486),ax=function(h){var c,a=h.topic,i=a.id,d=(0,e.useState)([]),b=d[0],j=d[1],f=(0,e.useState)(),g=f[0],k=f[1];return(0,e.useEffect)(function(){aw.x.note.getNoteByTopicId(i,1,1,{sortBy:"created",sortOrder:-1}).then(function(a){var b=a.data,c=a.pagination;j(b),k(c)})},[i]),(0,u.jsxs)("div",{className:"flex flex-col w-[400px]",children:[(0,u.jsx)(aq(),{href:"/notes/topics/".concat(a.slug),children:(0,u.jsx)("a",{children:(0,u.jsx)("h1",{className:"text-lg font-medium !m-0 py-2",children:a.name})})}),(0,u.jsx)("p",{className:"break-all line-clamp-2 text-gray-2",children:(0,u.jsx)(ar.Z,{children:a.introduce})}),a.description&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ac.i,{}),(0,u.jsx)("p",{className:"text-gray-1 leading-8",children:(0,u.jsx)(ar.Z,{children:a.description})})]}),b[0]&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ac.i,{}),(0,u.jsxs)("p",{className:"flex items-center",children:[(0,u.jsx)(D.xW,{}),(0,u.jsx)(ac.x,{}),(0,u.jsx)("span",{className:"flex-shrink-0",children:"\u6700\u8FD1\u66F4\u65B0"}),(0,u.jsx)(ac.x,{}),(0,u.jsxs)("span",{className:"flex-shrink inline-flex min-w-0",children:[(0,u.jsx)(aq(),{href:"/notes/".concat(b[0].nid),children:(0,u.jsx)("a",{className:"truncate",children:null===(c=b[0])|| void 0===c?void 0:c.title})}),(0,u.jsxs)("span",{className:"flex-shrink-0",children:["\uFF08",(0,u.jsx)(G.i,{date:b[0].modified||b[0].created,displayAbsoluteTimeAfterDay:1/0}),"\uFF09"]})]})]})]}),(0,u.jsx)(ac.i,{}),(0,u.jsxs)("p",{className:"flex items-center",children:[(0,u.jsx)(D.VK,{}),(0,u.jsx)(ac.x,{}),"\u5171\u6709\u6587\u7AE0\uFF1A",null==g?void 0:g.total," \u7BC7"]})]})},ay=function(c){var a=c.topic,d=a.icon,b=a.name,f=a.introduce,g=(0,Y.ez)().event,h=(0,e.useCallback)(function(){g({action:X.b.Click,label:"\u8BDD\u9898\u70B9\u51FB \u8FDB\u5165\u8BE6\u60C5 / ".concat(b)})},[b]);return(0,u.jsx)(as.X,{action:X.b.Impression,trackerMessage:"\u66DD\u5149\u5E95\u90E8\u8BDD\u9898 - ".concat(a.name),children:(0,u.jsxs)("div",{"data-hide-print":!0,children:[(0,u.jsx)("div",{className:"text-md",children:(0,u.jsx)("strong",{children:"\u6587\u7AE0\u88AB\u4E13\u680F\u6536\u5F55\uFF1A"})}),(0,u.jsx)(ac.i,{}),(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)(at.q,{size:60,imageUrl:d,text:av(b),className:"flex-shrink-0",useRandomColor:!1,shadow:!1,wrapperProps:(0,e.useMemo)(function(){return{className:"text-white dark:text-opacity-80"}},[])}),(0,u.jsxs)("div",{className:"flex-grow flex flex-col self-start",children:[(0,u.jsx)("span",{className:"text-md font-medium mb-2",children:(0,u.jsx)(au.r,{strategy:"absolute",triggerComponent:function(){return(0,u.jsx)(aq(),{href:"/notes/topics/".concat(a.slug),onClick:h,children:(0,u.jsx)("a",{children:(0,u.jsx)("span",{children:b})})})},children:(0,u.jsx)(as.X,{trackerMessage:"\u66DD\u5149 - \u5185\u9875\u8BDD\u9898 - ".concat(a.name),action:X.b.Impression,children:(0,u.jsx)(ax,{topic:a})})})}),(0,u.jsx)("p",{className:"opacity-80 text-shizuku-text text-sm line-clamp-2",children:(0,u.jsx)(ar.Z,{children:f})})]})]})]})})},az=a(45924),aA=a(39798),aB=(0,b.Pi)(function(c){var d=(0,$.oR)().userStore.isLogged,a=(0,e.useState)(!1),b=a[0],i=a[1],f=(0,e.useRef)(null),g=(0,Y.ez)().event,h=(0,z.useRouter)();return(0,e.useEffect)(function(){if(f.current){var a=f.current;return a.oncopy=function(a){d||(a.preventDefault(),i(!0),g({action:X.b.Interaction,label:"\u7981\u6B62\u590D\u5236\u89E6\u53D1\uFF0C\u5728 ".concat(h.asPath)}))},function(){a.oncopy=null}}},[g,d,h.asPath]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{ref:f,children:c.children}),(0,u.jsx)(aA.a,{onClose:function(){i(!1)},show:b,center:!0,blur:!0,darkness:.5,children:(0,u.jsxs)("div",{className:(0,az.W)("transition duration-200 transition-opacity",!b&&"opacity-0"),children:[(0,u.jsx)("h1",{className:"mt-0 text-red pointer-events-none",children:"\u6CE8\u610F: "}),(0,u.jsx)("div",{className:"my-3 text-white text-opacity-80 pointer-events-none",children:(0,u.jsx)("p",{children:"\u672C\u6587\u7AE0\u4E3A\u7AD9\u957F\u539F\u521B, \u4FDD\u7559\u7248\u6743\u6240\u6709, \u7981\u6B62\u590D\u5236."})})]})})]})}),aC=a(30974);let aD=new Set,aE=new WeakMap,aF=new WeakMap,aG=new WeakMap,aH=new WeakMap,aI=new WeakMap,aJ=new WeakMap,aK=new WeakMap,f,aL="__aa_tgt",aM="__aa_del";function aN(a){clearTimeout(aK.get(a));let b=aU(a),c="function"==typeof b?500:b.duration;aK.set(a,setTimeout(()=>{let b=aG.get(a);(!b||b.finished)&&(aE.set(a,aS(a)),function(b){let c=aH.get(b);null==c||c.disconnect();let a=aE.get(b),j=0;a||(a=aS(b),aE.set(b,a));let{offsetWidth:e,offsetHeight:g}=f,h=[a.top-5,e-(a.left+5+a.width),g-(a.top+5+a.height),a.left-5,],i=h.map(a=>`${-1*Math.floor(a)}px`).join(" "),d=new IntersectionObserver(()=>{++j>1&&aN(b)},{root:f,threshold:1,rootMargin:i});d.observe(b),aH.set(b,d)}(a))},c))}function aO(a){setTimeout(()=>{aI.set(a,setInterval(()=>aP(aN.bind(null,a)),2e3))},Math.round(2e3*Math.random()))}function aP(a){"function"==typeof requestIdleCallback?requestIdleCallback(()=>a()):requestAnimationFrame(()=>a())}let m,n;function aQ(a,b){b||aL in a?!b||aL in b||Object.defineProperty(b,aL,{value:a}):Object.defineProperty(a,aL,{value:a})}function aR(a){return Number(a.replace(/[^0-9.\-]/g,""))}function aS(b){let a=b.getBoundingClientRect();return{top:a.top+window.scrollY,left:a.left+window.scrollX,width:a.width,height:a.height}}function aT(j,b,c){let d=b.width,e=b.height,f=c.width,g=c.height,a=getComputedStyle(j),k=a.getPropertyValue("box-sizing");if("content-box"===k){let h=aR(a.paddingTop)+aR(a.paddingBottom)+aR(a.borderTopWidth)+aR(a.borderBottomWidth),i=aR(a.paddingLeft)+aR(a.paddingRight)+aR(a.borderRightWidth)+aR(a.borderLeftWidth);d-=i,f-=i,e-=h,g-=h}return[d,f,e,g].map(Math.round)}function aU(a){return aL in a&&aJ.has(a[aL])?aJ.get(a[aL]):{duration:250,easing:"ease-in-out"}}function aV(b,...c){c.forEach(a=>a(b,aJ.has(b)));for(let a=0;a<b.children.length;a++){let d=b.children.item(a);d&&c.forEach(a=>a(d,aJ.has(d)))}}function aW(b){let c=aE.get(b),[f,,g]=aT(b,c,aS(b)),a=b.parentElement;for(;a&&("static"===getComputedStyle(a).position||a instanceof HTMLBodyElement);)a=a.parentElement;a||(a=document.body);let d=getComputedStyle(a),e=aE.get(a)||aS(a),h=Math.round(c.top-e.top)-aR(d.borderTopWidth),i=Math.round(c.left-e.left)-aR(d.borderLeftWidth);return[h,i,f,g]}"undefined"!=typeof window&&(f=document.documentElement,m=new MutationObserver(b=>{var c;let a=(c=b).reduce((b,a)=>{if(!1===b)return!1;if(a.target instanceof Element){if(aQ(a.target),!b.has(a.target)){b.add(a.target);for(let e=0;e<a.target.children.length;e++){let d=a.target.children.item(e);if(d){if(aM in d)return!1;aQ(a.target,d),b.add(d)}}}if(a.removedNodes.length)for(let f=0;f<a.removedNodes.length;f++){let c=a.removedNodes[f];if(aM in c)return!1;c instanceof Element&&(b.add(c),aQ(a.target,c),aF.set(c,[a.previousSibling,a.nextSibling,]))}}return b},new Set);a&&a.forEach(a=>(function(a){var b;let c=f.contains(a),d=aE.has(a);c&&aF.has(a)&&aF.delete(a),aG.has(a)&&(null===(b=aG.get(a))|| void 0===b||b.cancel()),d&&c?function n(a){let b=aE.get(a),c=aS(a),d;if(!b)return;let e=aU(a);if("function"!=typeof e){let l=b.left-c.left,m=b.top-c.top,[h,i,j,k]=aT(a,b,c),f={transform:`translate(${l}px, ${m}px)`},g={transform:"translate(0, 0)"};h!==i&&(f.width=`${h}px`,g.width=`${i}px`),j!==k&&(f.height=`${j}px`,g.height=`${k}px`),d=a.animate([f,g],e)}else(d=new Animation(e(a,"remain",b,c))).play();aG.set(a,d),aE.set(a,c),d.addEventListener("finish",aN.bind(null,a))}(a):d&&!c?function k(a){if(!aF.has(a)||!aE.has(a))return;let[d,b]=aF.get(a);Object.defineProperty(a,aM,{value:!0}),b&&b.parentNode&&b.parentNode instanceof Element?b.parentNode.insertBefore(a,b):d&&d.parentNode&&d.parentNode.appendChild(a);let[f,g,h,i]=aW(a),e=aU(a),j=aE.get(a),c;Object.assign(a.style,{position:"absolute",top:`${f}px`,left:`${g}px`,width:`${h}px`,height:`${i}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),"function"!=typeof e?c=a.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0},],{duration:e.duration,easing:"ease-out"}):(c=new Animation(e(a,"remove",j))).play(),aG.set(a,c),c.addEventListener("finish",()=>{var b;a.remove(),aE.delete(a),aF.delete(a),aG.delete(a),null===(b=aH.get(a))|| void 0===b||b.disconnect()})}(a):function e(a){let d=aS(a);aE.set(a,d);let c=aU(a),b;"function"!=typeof c?b=a.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1},],{duration:1.5*c.duration,easing:"ease-in"}):(b=new Animation(c(a,"add",d))).play(),aG.set(a,b),b.addEventListener("finish",aN.bind(null,a))}(a)})(a))}),(n=new ResizeObserver(a=>{a.forEach(a=>{a.target===f&&(clearTimeout(aK.get(f)),aK.set(f,setTimeout(()=>{aD.forEach(a=>aV(a,a=>aP(()=>aN(a))))},100))),aE.has(a.target)&&aN(a.target)})})).observe(f));var o=a(52297),c="left-right-spring";(0,k.UU)(c,{translateX:"-3em",opacity:0},{translateX:"0em",opacity:1});var p={entering:{opacity:0},entered:{animation:"".concat(c," 1000ms linear both")},exiting:{animation:"".concat(c," 1000ms linear both reverse")},exited:{opacity:0}},aX=(0,o.I)({opacity:0},p),q=a(70473),aY=a.n(q);function aZ(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function a$(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var a_=(0,b.Pi)(function(h){var c,d,f,l=h.className,i=h.noteId,o=(0,$.oR)().noteStore,a=o.get(i),j=(0,e.useState)([a]),k=j[0],s=j[1];(0,e.useEffect)(function(){var a=+new Date;aw.x.note.getMiddleList(i,10).then(function(c){var d=c.data,b=+new Date-a;setTimeout(function(){s(d)},b>500?0:b)})},[i]);var b,g,t=(0,Y.ez)().event,p=(0,e.useCallback)(function(){var b,c;return(0,u.jsx)(aq(),{href:"/notes/topics/".concat(null==a?void 0:null===(b=a.topic)|| void 0===b?void 0:b.slug),onClick:function(){var b;return t({action:X.b.Click,label:"\u5DE6\u4FA7\u65F6\u95F4\u7EBF\u70B9\u51FB\u53BB\u8BDD\u9898\u9875 - ".concat(null==a?void 0:null===(b=a.topic)|| void 0===b?void 0:b.name)})},children:(0,u.jsx)("a",{children:(0,u.jsx)("span",{className:"flex-grow truncate",children:null==a?void 0:null===(c=a.topic)|| void 0===c?void 0:c.name})})})},[null==a?void 0:null===(c=a.topic)|| void 0===c?void 0:c.name,null==a?void 0:null===(d=a.topic)|| void 0===d?void 0:d.slug]),q=(b=function(b={}){let a=(0,e.useRef)(null);return(0,e.useEffect)(()=>{a.current instanceof HTMLElement&&function(a,b={}){if(m&&n){let c=window.matchMedia("(prefers-reduced-motion: reduce)");c.matches||("static"===getComputedStyle(a).position&&Object.assign(a.style,{position:"relative"}),aV(a,aN,aO,a=>null==n?void 0:n.observe(a)),"function"==typeof b?aJ.set(a,b):aJ.set(a,{duration:250,easing:"ease-in-out",...b}),m.observe(a,{childList:!0}),aD.add(a))}}(a.current,b)},[a]),[a]}(),g=1,function(a){if(Array.isArray(a))return a}(b)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,g)||function(a,c){if(a){if("string"==typeof a)return aZ(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aZ(a,c)}}(b,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=q[0];return(0,u.jsx)("div",{className:(0,az.W)(l,aY().container),"data-hide-print":!0,children:(0,u.jsxs)("div",{className:(0,az.W)(aY().list),children:[(0,u.jsx)("ul",{ref:r,children:k.map(function(a){var b=a.id===h.noteId;return(0,u.jsxs)("li",{className:"flex items-center",children:[(0,u.jsx)(aX,{in:b,children:(0,u.jsx)(D.gX,{className:"text-pink"})}),(0,u.jsx)(aq(),{href:"/notes/".concat(a.nid),children:(0,u.jsx)("a",{className:(0,az.W)(b?aY().active:null,aY().item),children:a.title})},a.id)]},a.id)})}),(null==a?void 0:a.topic)&&(0,u.jsxs)(u.Fragment,{children:[k.length&&(0,u.jsx)(ac.i,{className:"!w-3/4"}),(0,u.jsxs)("p",{className:"text-gray-1 flex flex-col min-w-0 overflow-hidden",children:["\u6B64\u6587\u7AE0\u6536\u5F55\u4E8E\u4E13\u680F\uFF1A",(0,u.jsx)("br",{}),(0,u.jsx)(au.r,{placement:"right",strategy:"fixed",wrapperClassNames:"flex flex-grow flex-shrink min-w-0",triggerComponent:p,children:(0,u.jsx)(as.X,{trackerMessage:"\u66DD\u5149 - \u5DE6\u4FA7\u65F6\u95F4\u7EBF\u8BDD\u9898\u5185\u9875\u5C55\u5F00 - ".concat(null==a?void 0:null===(f=a.topic)|| void 0===f?void 0:f.name),action:X.b.Impression,children:(0,u.jsx)(ax,{topic:null==a?void 0:a.topic})})})]})]})]})})}),a0=(0,b.Pi)(function(a){return(0,$.oR)().appUIStore.isNarrowThanLaptop?null:(0,u.jsx)(a_,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){a$(d,a,c[a])})}return d}({},a))}),a1=a(4067),a2=a(91384),a3=a(50978);function a4(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}var a5=(0,b.Pi)((0,e.forwardRef)(function(a,l){var m,n=a.date,b=a.id,t=a.title,o=a.tips,p=a.children,q=v()(n).locale("cn").format("YYYY\u5E74M\u6708D\u65E5 dddd"),g=(0,$.oR)(),h=g.userStore,d=h.isLogged,j=h.url,r=g.noteStore,c=r.get(b),f=null==c?void 0:c.hasMemory,k=(0,e.useCallback)((m=i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,aw.x.note.proxy(b).patch({data:{hasMemory:!f}});case 2:case"end":return a.stop()}},a)}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=m.apply(a,b);function c(a){a4(f,d,e,c,g,"next",a)}function g(a){a4(f,d,e,c,g,"throw",a)}c(void 0)})}),[f,b]),s=!!globalThis.location&&location.hash;return(0,u.jsxs)("main",{className:"max-w-[50em] relative is-note",ref:l,children:[(0,u.jsx)(a1._,{id:b,in:!0,appear:!s,mountOnEnter:!0,unmountOnExit:!0,timeout:0,children:(0,u.jsxs)("div",{className:"note-article relative",children:[(0,u.jsx)("div",{className:"title-headline text-light-brown dark:text-shizuku-text",children:(0,u.jsxs)("span",{className:"inline-flex items-center",children:[(0,u.jsx)("time",{className:"font-medium",children:q}),(0,u.jsxs)("div",{className:"ml-4 inline-flex space-x-2 items-center",children:[d?(0,u.jsx)(a3.T,{currentState:f?"solid":"regular",regularIcon:(0,u.jsx)(D.aJ,{className:"cursor-pointer",onClick:k}),solidIcon:(0,u.jsx)(D.CK,{className:"text-red cursor-pointer",onClick:k})}):f?(0,u.jsx)(D.CK,{className:"text-red"}):null,(null==c?void 0:c.hide)&&(0,u.jsx)(D.hb,{className:d?"":"text-red"})]})]})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("h1",{className:"text-center !mt-8 !before:hidden headline text-brown dark:text-shizuku-text",children:[(0,u.jsx)(au.r,{triggerComponent:function(){return(0,u.jsx)(u.Fragment,{children:t})},placement:"bottom",children:o}),d&&j?(0,u.jsx)("a",{"data-hide-print":!0,className:"edit-link",target:"_blank",href:(0,a2.Kk)("#/notes/edit?id=".concat(b),j.adminUrl),children:"\u7F16\u8F91"}):null]}),p]})]})}),(0,u.jsx)(a0,{noteId:b})]})})),a6=a(85574),a7=a(19129),a8=a(83958),a9=a(39960),ba=a(24152),bb=a(19560),bc=function(){(0,e.useEffect)(function(){(0,bb.Wx)("https://fonts.loli.net/css?family=Noto+Serif+SC&display=swap")},[])},bd=function(a){var b=(0,$.oR)().musicStore;(0,e.useEffect)(function(){if(a){if(0===a.length){b.empty();return}return b.setPlaylist(a),b.setHide(!1),function(){b.empty(),b.setHide(!0)}}},[a])},be=function(a){bd((0,e.useMemo)(function(){return a&&Array.isArray(a)&&a.length>0?a.filter(function(a){return a.id&&"netease"===a.type}).map(function(a){return~~a.id}):null},[a]))},bf=a(81425),bg=a(81710),bh=a(55586),bi=a(48655),bj=a(34976),bk=a(79461);function bl(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function bm(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function bn(b,a){return null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](b):b instanceof a}var r,s,bo=function(b){var a=$.h.noteStore.get(b),c=(0,e.useRef)(),d=(0,Y.ez)().event;(0,e.useEffect)(function(){var e="\u6B64\u751F\u6D3B\u8BB0\u5F55\u5DF2\u88AB\u4F5C\u8005\u5220\u9664\u6216\u9690\u85CF";if(null==a?void 0:a.isDeleted){A.yw.error(e);return}var b=c.current;if(!b&&a){c.current=(0,y.ZN)(a);return}if(!(!b||!a||(0,w.Z)(b,(0,y.ZN)(a)))){if(b.id===a.id){if(a.hide&&!$.h.userStore.isLogged){A.yw.error(e);return}A.yw.info("\u751F\u6D3B\u8BB0\u5F55\u5DF2\u66F4\u65B0"),d({action:X.b.Interaction,label:"\u5B9E\u65F6\u66F4\u65B0\u751F\u6D3B\u8BB0\u5F55\u89E6\u53D1 - ".concat(a.title)}),bk.r8&&console.log("note-change: ",JSON.stringify(a),"before: ",JSON.stringify(b))}c.current=(0,y.ZN)(a)}},[null==a?void 0:a.title,null==a?void 0:a.text,null==a?void 0:a.modified,null==a?void 0:a.weather,null==a?void 0:a.hide,null==a?void 0:a.isDeleted,null==a?void 0:a.topicId,])},bp=(0,b.Pi)(function(b){var f,h=(0,$.oR)(),o=h.userStore,p=h.noteStore,a=p.get(b.id)||a2.ZT,s=(0,z.useRouter)();(0,e.useEffect)(function(){"latest"===s.query.id&&s.replace({pathname:"/notes/".concat(a.nid),query:function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){bm(d,a,c[a])})}return d}({},(0,x.Z)(s.query,"id"))})},[a.nid]),(0,e.useEffect)(function(){p.relationMap.has(b.id)||p.fetchById(a.nid,void 0,{force:!0})},[a.nid]),(0,a9.Q)(a.title,a.text),bo(a.id),bc(),(0,a9.Z)(a.title,"\u751F\u6D3B\u89C2\u5BDF\u65E5\u8BB0".concat(a.topic?" / ".concat(a.topic.name):"")),be(a.music);var c=a.title,i=a.id,g=a.text,j=(0,e.useState)(""),q=j[0],t=j[1],k=(0,bg.D)(g,{count:!0,length:150}),l=k.description,r=k.wordCount;(0,e.useEffect)(function(){try{t("\u521B\u5EFA\u4E8E ".concat((0,bh.sG)(a.created,"YYYY-MM-DD dddd")).concat(a.modified?", \u4FEE\u6539\u4E8E ".concat((0,bh.sG)(a.modified,"YYYY-MM-DD dddd")):"",", \u5168\u6587\u5B57\u6570: ").concat(r,", \u9605\u8BFB\u6B21\u6570: ").concat(a.count.read,", \u559C\u6B22\u6B21\u6570: ").concat(a.count.like))}catch(b){}},[g,a.created,a.modified,a.count.read,a.count.like,r,]);var d=!!a.secret&&v()(a.secret).isAfter(new Date),m=(0,e.useMemo)(function(){return new Date(a.secret)},[a.secret]),n=a.secret?Intl.DateTimeFormat("zh-cn",{hour12:!1,hour:"numeric",minute:"numeric",year:"numeric",day:"numeric",month:"long"}).format(m):"";return(0,e.useEffect)(function(){var a;return d&&(a=setTimeout(function(){A.yw.info("\u5237\u65B0\u4EE5\u67E5\u770B\u89E3\u9501\u7684\u6587\u7AE0",3)},+m- +new Date)),function(){clearTimeout(a)}},[d,m]),(0,ba.h)(a.id),(0,u.jsxs)(u.Fragment,{children:[(0,e.createElement)(bi.p,{title:c,description:l,openGraph:{title:c,type:"article",description:l,article:{publishedTime:a.created,modifiedTime:a.modified||void 0,tags:a.topic?[a.topic.name]:[]}}}),(0,u.jsxs)(a5,{title:c,date:a.created,tips:q,id:a.id,children:[d&&!o.isLogged?(0,u.jsxs)("p",{className:"text-center my-8",children:["\u8FD9\u7BC7\u6587\u7AE0\u6682\u65F6\u6CA1\u6709\u516C\u5F00\u5462\uFF0C\u5C06\u4F1A\u5728 ",n," \u89E3\u9501\uFF0C\u518D\u7B49\u7B49\u54E6"]}):(0,u.jsxs)(bj.Q.Provider,{value:(0,e.useMemo)(function(){return(0,bf.Gj)(a.images||[])},[a.images]),children:[d&&(0,u.jsxs)("span",{className:"flex justify-center -mb-3.5",children:["\u8FD9\u662F\u4E00\u7BC7\u975E\u516C\u5F00\u7684\u6587\u7AE0\u3002(\u5C06\u5728 ",n," \u89E3\u9501)"]}),(0,u.jsx)(aB,{children:(0,u.jsxs)("article",{children:[(0,u.jsx)("h1",{className:"sr-only",children:c}),(0,u.jsx)(an,{text:g})]})})]}),(0,u.jsx)("div",{className:"pb-4"}),a.topic&&(0,u.jsx)(ay,{noteId:b.id,topic:a.topic}),(0,u.jsx)(ak,{id:b.id}),(0,u.jsx)("div",{className:"pb-4"}),(0,u.jsx)(aa,{id:b.id})]}),!d&&(0,u.jsx)(aC.B,{className:"!pt-0 !min-h-[unset]",children:(0,u.jsx)(a7.p,{id:i,allowComment:null===(f=a.allowComment)|| void 0===f||f},i)},"comments-".concat(b.id)),(0,u.jsx)(a8.SearchFAB,{})]})}),g=(0,b.Pi)(function(a){var c,g=(0,z.useRouter)(),d=(0,$.oR)().noteStore,b=d.get(null===(c=a)|| void 0===c?void 0:c.id),h=(0,B.Z)();if((0,e.useEffect)(function(){b||h()},[b]),"needPassword"in a){if(b)return(0,u.jsx)(bp,{id:b.id});var f=function(b){var a=g.query.id;d.fetchById(isNaN(+a)?a:+a,b).catch(function(a){A.yw.error("\u5BC6\u7801\u9519\u8BEF")}).then(function(){h()})};return(0,u.jsx)(ap,{onSubmit:f})}return b?(0,u.jsx)(bp,{id:a.id}):(d.add(a),(0,u.jsx)(a6.g,{}))});g.getInitialProps=(s=(r=i().mark(function a(b){var c,d,e,f;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.query.id,d=b.query.password,"latest"!=c){a.next=6;break}return a.next=5,$.h.noteStore.fetchLatest();case 5:return a.abrupt("return",a.sent);case 6:return a.prev=6,a.next=9,$.h.noteStore.fetchById(isNaN(+c)?c:+c,d?String(d):void 0,{force:!0});case 9:return e=a.sent,a.abrupt("return",e);case 13:if(a.prev=13,a.t0=a.catch(6),!bn(a.t0,C.Lu)){a.next=22;break}if(!((null===(f=a.t0.raw.response)|| void 0===f?void 0:f.status)!==403)){a.next=19;break}throw a.t0;case 19:return a.abrupt("return",{needPassword:!0,id:+c});case 22:throw a.t0;case 23:case"end":return a.stop()}},a,null,[[6,13]])}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=r.apply(a,b);function c(a){bl(f,d,e,c,g,"next",a)}function g(a){bl(f,d,e,c,g,"throw",a)}c(void 0)})}),function(a){return s.apply(this,arguments)});var bq=g},81710:function(d,b,a){"use strict";a.d(b,{D:function(){return f}});var c=a(85606),e=a.n(c);function f(d){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{count:!1,length:150},b=e()(d,{gfm:!0}),c=b.slice(0,a.length).replace(/[\s]/gm," ");return a.count?{description:c,wordCount:b.length}:c}},70473:function(a){a.exports={container:"NoteTimelineList_container__n0aHd",item:"NoteTimelineList_item__opW0U",list:"NoteTimelineList_list__VZYY0",active:"NoteTimelineList_active__Hc3Qo"}},56710:function(a){a.exports={"like-button":"LikeButton_like-button__RGgSw",checked:"LikeButton_checked__WPR18",animateHeart:"LikeButton_animateHeart__PH_NS",animateCircle:"LikeButton_animateCircle__6br16",animateHeartOut:"LikeButton_animateHeartOut__M__iI"}},63792:function(a){a.exports={icon:"ArticleAction_icon__gRaNV",root:"ArticleAction_root__ZBwKD"}},86142:function(c,b,a){"use strict";a.d(b,{Z:function(){return f}});var d=a(50959),e=function(a){return(a+1)%1e6};function f(){return(0,d.useReducer)(e,0)[1]}},55883:function(b,a){"use strict";a.Z=function(){}}},function(a){a.O(0,[621,674,707,243,780,0,697,32,468,672,833,625,623,136,958,519,774,888,179],function(){return a(a.s=10894)}),_N_E=a.O()}])