{"version":3,"sources":["webpack://_N_E/./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?14b3","webpack://_N_E/./components/NumberRecorder/index.tsx","webpack://_N_E/./models/note.ts","webpack://_N_E/./components/Action/index.tsx","webpack://_N_E/./utils/weather2icon.ts","webpack://_N_E/./pages/notes/.tsx","webpack://_N_E/./components/Action/index.module.scss?f9f8","webpack://_N_E/./components/NumberRecorder/index.module.scss?eb6b"],"names":["window","__NEXT_P","push","NumberRecorder","props","number","useState","n","setN","numbersRef","useRef","useEffect","current","animate","transform","duration","easing","onfinish","className","styles","style","width","toString","length","ref","Mood","Weather","MoodMap","Object","freeze","fromEntries","entries","WeatherMap","memo","actions","informs","copyright","rest","map","inform","index","key","icon","color","name","href","target","title","faCreativeCommons","minHeight","action","i","cursor","onClick","callback","weather2icon","weather","sunshine","faSun","cloudy","faCloudSun","overcast","faCloud","snow","faSnowflake","rainy","faCloudRain","mood2icon","mood","happy","faSmile","sad","faSadCry","angry","faAngry","pain","faTired","sorrow","faMeh","unhappy","excite","faGrinSquint","worry","faFrownOpen","terrible","faGrimace","detestable","despair","anxiety","faFlushed","renderLines","value","NoteView","observer","data","prev","next","_id","text","useStore","userStore","appStore","count","like","setLike","router","useRouter","tips","setTips","document","oncopy","e","isLogged","preventDefault","warn","getSummaryFromMd","description","wordCount","parseDate","created","modified","read","documentElement","scrollTop","setTimeout","scroll","top","left","behavior","isLiked","setLiked","faHeart","undefined","error","Rest","get","withCredentials","then","success","catch","keys","includes","faUser","relativeTimeFromNow","faClock","faBookOpen","headerNav","meta","show","openGraph","profile","username","NoteLayout","date","Date","ImageSizes","Provider","images","escapeHtml","renderers","Action","nid","scrollTo","ArticleLayout","paddingTop","delay","Comment","type","id","allowComment","getInitialProps","a","query","module","exports"],"mappings":"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","file":"static/chunks/pages/notes/[id]-7b45ab14a61805597d3b.js","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/notes/[id]\",\n      function () {\n        return require(\"private-next-pages/notes/[id].tsx\");\n      }\n    ]);\n  ","import { FC, useEffect, useRef, useState } from 'react'\nimport styles from './index.module.scss'\n\ninterface NumberRecorderProps {\n  number: number\n}\n\nconst NumberRecorder: FC<NumberRecorderProps> = (props) => {\n  const { number } = props\n  const [n, setN] = useState(number)\n  const numbersRef = useRef<HTMLDivElement>(null)\n  useEffect(() => {\n    if (!numbersRef.current || n === number) {\n      return\n    }\n\n    const animate = numbersRef.current.animate(\n      [\n        {\n          transform: 'translateY(-1em)',\n        },\n        {\n          transform: `translateY(${number === n + 1 ? -2 : 0}em)`,\n        },\n      ],\n      { duration: 500, easing: 'cubic-bezier(0.34, 1.56, 0.64, 1)' },\n    )\n\n    animate.onfinish = () => {\n      setN(number)\n    }\n  }, [n, number])\n\n  return (\n    <div\n      className={styles['recorder']}\n      style={{ width: `${n.toString().length}em` }}\n    >\n      <div className={styles['numbers']} ref={numbersRef}>\n        {n - 1 < 0 ? <span></span> : <span>{n - 1}</span>}\n        <span>{n}</span>\n        <span>{n + 1}</span>\n      </div>\n    </div>\n  )\n}\n\nexport { NumberRecorder }\n","import { BaseRespModel, BaseModel, ImageSizeRecord } from './base'\nexport interface CountRecord {\n  read: number\n  like: number\n}\nexport interface NoteModel extends BaseModel {\n  commentsIndex: number\n  allowComment?: boolean\n  hide: boolean\n  count: CountRecord\n  _id: string\n  title: string\n  text: string\n  mood?: keyof typeof Mood\n  weather?: keyof typeof Weather\n  nid: number\n  id: string\n  images: ImageSizeRecord[]\n}\n\nexport interface NoteLastestResp extends BaseRespModel {\n  data: NoteModel\n  next: { _id: string; nid: number; id: string }\n}\n\nexport interface NoteResp extends BaseRespModel {\n  data: NoteModel\n  prev: Partial<NoteModel>\n  next: Partial<NoteModel>\n}\n\nexport enum Mood {\n  'happy' = '开心',\n  'sad' = '伤心',\n  'angry' = '生气',\n  'sorrow' = '悲哀',\n  'pain' = '痛苦',\n  'terrible' = '可怕',\n  'unhappy' = '不快',\n  'detestable' = '可恶',\n  'worry' = '担心',\n  'despair' = '绝望',\n  'anxiety' = '焦虑',\n  'excite' = '激动',\n}\nexport enum Weather {\n  'sunshine' = '晴',\n  'cloudy' = '多云',\n  'rainy' = '雨',\n  'overcast' = '阴',\n  'snow' = '雪',\n}\nexport const MoodMap = Object.freeze(Object.fromEntries(Object.entries(Mood)))\nexport const WeatherMap = Object.freeze(\n  Object.fromEntries(Object.entries(Weather)),\n)\n","import {\n  faCreativeCommons,\n  IconDefinition,\n} from '@fortawesome/free-brands-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { DetailedHTMLProps, HTMLAttributes, memo } from 'react'\nimport styles from './index.module.scss'\n\ntype BaseAction = {\n  icon: IconDefinition\n  name: string | number | JSX.Element\n  color?: string\n}\n\nexport interface ActionProps\n  extends DetailedHTMLProps<HTMLAttributes<HTMLDivElement>, HTMLDivElement> {\n  informs?: BaseAction[]\n  actions?: (BaseAction & {\n    callback: () => void\n  })[]\n  copyright?: boolean\n}\n\nexport default memo(function Action(props: ActionProps) {\n  const { actions = [], informs = [], copyright = true, ...rest } = props\n\n  return (\n    <>\n      <div className=\"note-inform\" {...rest}>\n        {informs.map((inform, index) => {\n          return (\n            <span key={index}>\n              <FontAwesomeIcon\n                icon={inform.icon}\n                className={styles.icon}\n                color={inform.color}\n              />\n              {inform.name}\n            </span>\n          )\n        })}\n\n        {copyright && (\n          <a\n            href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\"\n            style={{ color: 'currentColor' }}\n            // eslint-disable-next-line react/jsx-no-target-blank\n            target={'_blank'}\n          >\n            <span title={'创作共用保留署名-非商业-禁止演绎4.0国际许可证'}>\n              <FontAwesomeIcon\n                icon={faCreativeCommons}\n                className={styles.icon}\n              />\n            </span>\n          </a>\n        )}\n      </div>\n      <div className=\"note-action\" style={{ minHeight: '1rem' }}>\n        {actions.map((action, i) => {\n          return (\n            <span\n              key={i}\n              style={{ cursor: 'pointer' }}\n              onClick={action.callback}\n            >\n              <FontAwesomeIcon\n                icon={action.icon}\n                className={styles.icon}\n                color={action.color}\n              />\n              {action.name}\n            </span>\n          )\n        })}\n      </div>\n    </>\n  )\n})\n","import { Weather, Mood } from 'models/note'\nimport {\n  IconDefinition,\n  faSun,\n  faCloud,\n  faCloudSun,\n  faSnowflake,\n  faCloudRain,\n} from '@fortawesome/free-solid-svg-icons'\nimport {\n  faSmile,\n  faSadCry,\n  faAngry,\n  faTired,\n  faMeh,\n  faGrinSquint,\n  faFrownOpen,\n  faGrimace,\n  faFlushed,\n} from '@fortawesome/free-regular-svg-icons'\n\nexport const weather2icon = (weather: keyof typeof Weather) => {\n  const map: Record<typeof weather, IconDefinition> = {\n    sunshine: faSun,\n    cloudy: faCloudSun,\n    overcast: faCloud,\n    snow: faSnowflake,\n    rainy: faCloudRain,\n  }\n  return map[weather]\n}\n\nexport const mood2icon = (mood: keyof typeof Mood) => {\n  const map: Record<typeof mood, IconDefinition> = {\n    happy: faSmile,\n    sad: faSadCry,\n    angry: faAngry,\n    pain: faTired,\n    sorrow: faMeh,\n    unhappy: faMeh,\n    excite: faGrinSquint,\n    worry: faFrownOpen,\n    terrible: faGrimace,\n    detestable: faAngry,\n    despair: faFrownOpen,\n    anxiety: faFlushed,\n  }\n  return map[mood]\n}\n","import { faSmile } from '@fortawesome/free-regular-svg-icons'\nimport {\n  faBookOpen,\n  faClock,\n  faCloud,\n  faHeart,\n  faUser,\n} from '@fortawesome/free-solid-svg-icons'\nimport { message } from 'antd'\nimport { useStore } from 'common/store'\nimport Action, { ActionProps } from 'components/Action'\nimport CommentWrap from 'components/Comment'\nimport Markdown from 'components/MD-render'\nimport { NumberRecorder } from 'components/NumberRecorder'\nimport { ArticleLayout } from 'layouts/ArticleLayout'\nimport { NoteLayout } from 'layouts/NoteLayout'\nimport { observer } from 'mobx-react'\nimport {\n  Mood,\n  MoodMap,\n  NoteModel,\n  NoteResp,\n  Weather,\n  WeatherMap,\n} from 'models/note'\nimport { NextPage } from 'next'\nimport { useRouter } from 'next/router'\nimport { FC, useEffect, useState } from 'react'\nimport { Rest } from 'utils/api'\nimport { parseDate, relativeTimeFromNow } from 'utils/time'\nimport { mood2icon, weather2icon } from 'utils/weather2icon'\nimport { ImageSizesContext } from '../../common/context/ImageSizes'\nimport { Seo } from '../../components/SEO'\nimport { getSummaryFromMd } from '../../utils'\n\ninterface NoteViewProps {\n  data: NoteModel\n  prev: Partial<NoteModel>\n  next: Partial<NoteModel>\n}\n\nconst renderLines: FC<{ value: string }> = ({ value }) => {\n  // if (!props.children) {\n  //   return null\n  // }\n  // const isImage = !!((props.children as any)[0] as any)?.props?.src\n  // return (\n  //   <p className={isImage ? undefined : 'indent'}>\n  //     {isImage ? props.children : <span>{props.children}</span>}\n  //   </p>\n  // )\n  return <span className=\"indent\">{value}</span>\n}\n\nconst NoteView: NextPage<NoteViewProps> = observer((props) => {\n  const { data, prev, next } = props\n  const { title, _id, text, mood, weather } = data\n  const { userStore, appStore } = useStore()\n  const [like, setLike] = useState(data.count.like ?? 0)\n  const router = useRouter()\n  const [tips, setTips] = useState(``)\n\n  useEffect(() => {\n    document.oncopy = (e) => {\n      if (userStore.isLogged) {\n        return\n      }\n      e.preventDefault()\n      message.warn('禁止复制!')\n    }\n\n    return () => {\n      document.oncopy = null\n    }\n  }, [userStore.isLogged])\n  const { description, wordCount } = getSummaryFromMd(text, { count: true })\n  useEffect(() => {\n    try {\n      setTips(\n        `创建于 ${parseDate(\n          data.created,\n          'YYYY-MM-DD dddd',\n        )}, 修改于 ${parseDate(\n          data.modified,\n          'YYYY-MM-DD dddd',\n        )}, 全文字数: ${wordCount}, 阅读次数: ${data.count.read}, 喜欢次数: ${\n          data.count.like\n        }`,\n      )\n      // eslint-disable-next-line no-empty\n    } catch {}\n  }, [\n    text,\n    data.created,\n    data.modified,\n    data.count.read,\n    data.count.like,\n    wordCount,\n  ])\n  useEffect(() => {\n    if (document.documentElement.scrollTop > 50) {\n      document.documentElement.scrollTop = 50\n    }\n    setTimeout(() => {\n      window.scroll({ top: 0, left: 0, behavior: 'smooth' })\n    }, 10)\n\n    setLike(props.data.count.like ?? 0)\n  }, [props])\n  const [isLiked, setLiked] = useState(false)\n  const actions: ActionProps = {\n    informs: [],\n    actions: [\n      {\n        // name: like !== 0 ? like : '喜欢',\n        name: <NumberRecorder number={like || 0} />,\n        icon: faHeart,\n        color: like - 1 === data.count.like || isLiked ? '#e74c3c' : undefined,\n        callback: () => {\n          if (like - 1 === data.count.like) {\n            return message.error('你已经喜欢过啦!')\n          }\n          Rest('Note')\n            .get<any>('like/' + _id, { withCredentials: true })\n            .then(() => {\n              message.success('感谢喜欢!')\n              setLike(like + 1)\n            })\n            .catch(() => {\n              setLiked(true)\n            })\n        },\n      },\n    ],\n  }\n  {\n    if (weather && Object.keys(Weather).includes(weather)) {\n      actions.informs!.push({\n        name: WeatherMap[weather],\n        icon: weather2icon(weather),\n      })\n    } else if (weather) {\n      actions.informs!.push({\n        name: weather,\n        icon: faCloud,\n      })\n    }\n    if (mood && Object.keys(Mood).includes(mood)) {\n      actions.informs!.push({\n        name: MoodMap[mood],\n        icon: mood2icon(mood),\n      })\n    } else if (mood) {\n      actions.informs!.push({\n        name: mood,\n        icon: faSmile,\n      })\n    }\n\n    actions.informs!.push(\n      {\n        name: userStore.name as string,\n        icon: faUser,\n      },\n      {\n        name: relativeTimeFromNow(data.created),\n        icon: faClock,\n      },\n      {\n        name: data.count.read.toString(),\n        icon: faBookOpen,\n      },\n    )\n  }\n\n  useEffect(() => {\n    appStore.headerNav = {\n      title,\n      meta: '日记',\n      show: true,\n    }\n    return () => {\n      appStore.headerNav.show = false\n    }\n  }, [appStore, title])\n\n  return (\n    <>\n      <Seo\n        {...{\n          title: title,\n          description,\n          openGraph: {\n            title,\n            description,\n            profile: {\n              username: userStore.name,\n            },\n          },\n        }}\n      />\n\n      <NoteLayout title={title} date={new Date(data.created)} tips={tips}>\n        <ImageSizesContext.Provider value={props.data.images}>\n          <Markdown\n            value={text}\n            escapeHtml={false}\n            renderers={{ text: renderLines }}\n          />\n        </ImageSizesContext.Provider>\n\n        <Action {...actions} />\n\n        {(!!next || !!prev) && (\n          <section className=\"paul-more\">\n            {!!next && (\n              <button\n                className=\"btn green\"\n                onClick={() => {\n                  router.push('/notes/[id]', `/notes/${next.nid}`)\n                }}\n              >\n                前一篇\n              </button>\n            )}\n            {\n              <button\n                className=\"btn yellow\"\n                onClick={() => {\n                  window.scrollTo({\n                    left: 0,\n                    top: 0,\n                    behavior: 'smooth',\n                  })\n                  router.push('/timeline?type=note')\n                }}\n              >\n                时间线\n              </button>\n            }\n            {!!prev && (\n              <button\n                className=\"btn green\"\n                onClick={() => {\n                  router.push('/notes/[id]', `/notes/${prev.nid}`)\n                }}\n              >\n                后一篇\n              </button>\n            )}\n          </section>\n        )}\n      </NoteLayout>\n\n      <ArticleLayout\n        style={{ minHeight: 'unset', paddingTop: '0' }}\n        delay={2000}\n      >\n        <CommentWrap\n          type={'Note'}\n          id={_id}\n          allowComment={props.data.allowComment ?? true}\n        />\n      </ArticleLayout>\n    </>\n  )\n})\nNoteView.getInitialProps = async ({ query }) => {\n  const id = query.id as string\n  const { data, prev, next } = await Rest('Note', 'nid').get<NoteResp>(id)\n  return { data, prev, next }\n}\n\nexport default NoteView\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"Action_icon__3BtwG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"recorder\":\"NumberRecorder_recorder__3RxBH\",\"numbers\":\"NumberRecorder_numbers__2L9ZB\"};"],"sourceRoot":""}