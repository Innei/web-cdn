_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[35],{13:function(e,n,t){t("j36g"),e.exports=t("7o6c")},"7o6c":function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/[id]",function(){return t("MjEs")}])},"8L9l":function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var o=t("q1tI"),c=t.n(o),a=t("l73F"),r=t.n(a),i=c.a.createElement,s=function(e){var n=e.number,t=Object(o.useState)(n),c=t[0],a=t[1],s=Object(o.useRef)(null);return Object(o.useEffect)((function(){s.current&&c!==n&&(s.current.animate([{transform:"translateY(-1em)"},{transform:"translateY(".concat(n===c+1?-2:0,"em)")}],{duration:500,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).onfinish=function(){a(n)})}),[c,n]),i("div",{className:r.a.recorder,style:{width:"".concat(c.toString().length,"em")}},i("div",{className:r.a.numbers,ref:s},i("span",null,c-1<0?"0":c-1),i("span",null,c),i("span",null,c+1)))}},AIw3:function(e,n,t){"use strict";var o,c;t.d(n,"a",(function(){return o})),t.d(n,"c",(function(){return c})),t.d(n,"b",(function(){return a})),t.d(n,"d",(function(){return r})),function(e){e.happy="\u5f00\u5fc3",e.sad="\u4f24\u5fc3",e.angry="\u751f\u6c14",e.sorrow="\u60b2\u54c0",e.pain="\u75db\u82e6",e.terrible="\u53ef\u6015",e.unhappy="\u4e0d\u5feb",e.detestable="\u53ef\u6076",e.worry="\u62c5\u5fc3",e.despair="\u7edd\u671b",e.anxiety="\u7126\u8651",e.excite="\u6fc0\u52a8"}(o||(o={})),function(e){e.sunshine="\u6674",e.cloudy="\u591a\u4e91",e.rainy="\u96e8",e.overcast="\u9634",e.snow="\u96ea"}(c||(c={}));var a=Object.freeze(Object.fromEntries(Object.entries(o))),r=Object.freeze(Object.fromEntries(Object.entries(c)))},CBBT:function(e,n,t){"use strict";var o=t("wx14"),c=t("Ff2n"),a=t("q1tI"),r=t.n(a),i=t("8tEE"),s=t("IP2g"),u=t("PL58"),l=t.n(u),d=r.a.createElement;n.a=Object(a.memo)((function(e){var n=e.actions,t=void 0===n?[]:n,a=e.informs,u=void 0===a?[]:a,m=e.copyright,f=void 0===m||m,p=Object(c.a)(e,["actions","informs","copyright"]);return d(r.a.Fragment,null,d("div",Object(o.a)({className:"note-inform"},p),u.map((function(e,n){return d("span",{key:n},d(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name)})),f&&d("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",style:{color:"currentColor"},target:"_blank"},d("span",{title:"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"},d(s.a,{icon:i.e,className:l.a.icon})))),d("div",{className:"note-action",style:{minHeight:"1rem"}},t.map((function(e,n){return d("span",{key:n,style:{cursor:"pointer"},onClick:e.callback},d(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name)}))))}))},MjEs:function(e,n,t){"use strict";t.r(n);var o=t("o0o1"),c=t.n(o),a=t("HaE+"),r=t("QpBz"),i=t.n(r),s=t("q1tI"),u=t.n(s),l=t("twK/"),d=t("wHSu"),m=t("zQ19"),f=t("CBBT"),p=t("ib2w"),b=t("9uS9"),h=t("8L9l"),v=t("AauJ"),w=t("dumg"),j=t("ytCK"),y=t("AIw3"),O=t("nOHt"),g=t("AoAR"),N=t("eSIs"),k=function(e){return{sunshine:d.C,cloudy:d.k,overcast:d.i,snow:d.B,rainy:d.j}[e]},E=function(e){return{happy:l.k,sad:l.j,angry:l.a,pain:l.l,sorrow:l.i,unhappy:l.i,excite:l.h,worry:l.f,terrible:l.g,detestable:l.a,despair:l.f,anxiety:l.e}[e]},_=t("TGNx"),x=t("MaJT"),C=t("cBaE"),S=u.a.createElement,T=function(e){var n=e.value;return S("span",{className:"indent"},n)},B=Object(j.a)((function(e){var n,t,o=e.data,c=e.prev,a=e.next,r=o.title,j=o._id,B=o.text,Y=o.mood,H=o.weather,I=Object(m.c)(),L=I.userStore,M=I.appStore,P=Object(s.useState)(null!==(n=o.count.like)&&void 0!==n?n:0),A=P[0],D=P[1],R=Object(O.useRouter)(),z=Object(s.useState)(""),F=z[0],q=z[1];Object(s.useEffect)((function(){return document.oncopy=function(e){L.isLogged||(e.preventDefault(),i.a.warn("\u7981\u6b62\u590d\u5236!"))},function(){document.oncopy=null}}),[L.isLogged]);var J=Object(C.e)(B,{count:!0}),G=J.description,K=J.wordCount;Object(s.useEffect)((function(){try{q("\u521b\u5efa\u4e8e ".concat(Object(N.a)(o.created,"YYYY-MM-DD dddd"),", \u4fee\u6539\u4e8e ").concat(Object(N.a)(o.modified,"YYYY-MM-DD dddd"),", \u5168\u6587\u5b57\u6570: ").concat(K,", \u9605\u8bfb\u6b21\u6570: ").concat(o.count.read,", \u559c\u6b22\u6b21\u6570: ").concat(o.count.like))}catch(e){}}),[B,o.created,o.modified,o.count.read,o.count.like,K]),Object(s.useEffect)((function(){var n;document.documentElement.scrollTop>50&&(document.documentElement.scrollTop=50),setTimeout((function(){window.scroll({top:0,left:0,behavior:"smooth"})}),10),D(null!==(n=e.data.count.like)&&void 0!==n?n:0)}),[e]);var Q=Object(s.useState)(!1),X=Q[0],Z=Q[1],U={informs:[],actions:[{name:S(h.a,{number:A||0}),icon:d.t,color:A-1===o.count.like||X?"#e74c3c":void 0,callback:function(){if(A-1===o.count.like)return i.a.error("\u4f60\u5df2\u7ecf\u559c\u6b22\u8fc7\u5566!");Object(g.a)("Note").get("like/"+j,{withCredentials:!0}).then((function(){i.a.success("\u611f\u8c22\u559c\u6b22!"),D(A+1)})).catch((function(){Z(!0)}))}}]};return H&&Object.keys(y.c).includes(H)?U.informs.push({name:y.d[H],icon:k(H)}):H&&U.informs.push({name:H,icon:d.i}),Y&&Object.keys(y.a).includes(Y)?U.informs.push({name:y.b[Y],icon:E(Y)}):Y&&U.informs.push({name:Y,icon:l.k}),U.informs.push({name:L.name,icon:d.H},{name:Object(N.b)(o.created),icon:d.h},{name:o.count.read.toString(),icon:d.d}),Object(s.useEffect)((function(){return M.headerNav={title:r,meta:"\u65e5\u8bb0",show:!0},function(){M.headerNav.show=!1}}),[M,r]),S(u.a.Fragment,null,S(x.b,{title:r,description:G,openGraph:{title:r,description:G,profile:{username:L.name}}}),S(w.a,{title:r,date:new Date(o.created),tips:F},S(_.a.Provider,{value:e.data.images},S(b.a,{value:B,escapeHtml:!1,renderers:{text:T}})),S(f.a,U),(!!a||!!c)&&S("section",{className:"paul-more"},!!a&&S("button",{className:"btn green",onClick:function(){R.push("/notes/[id]","/notes/".concat(a.nid))}},"\u524d\u4e00\u7bc7"),S("button",{className:"btn yellow",onClick:function(){window.scrollTo({left:0,top:0,behavior:"smooth"}),R.push("/timeline?type=note")}},"\u65f6\u95f4\u7ebf"),!!c&&S("button",{className:"btn green",onClick:function(){R.push("/notes/[id]","/notes/".concat(c.nid))}},"\u540e\u4e00\u7bc7"))),S(v.a,{style:{minHeight:"unset",paddingTop:"0"},delay:2e3},S(p.c,{type:"Note",id:j,allowComment:null===(t=e.data.allowComment)||void 0===t||t})))}));B.getInitialProps=function(){var e=Object(a.a)(c.a.mark((function e(n){var t,o,a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query,o=t.id,e.next=4,Object(g.a)("Note","nid").get(o);case 4:return a=e.sent,r=a.data,i=a.prev,s=a.next,e.abrupt("return",{data:r,prev:i,next:s});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();n.default=B},PL58:function(e,n,t){e.exports={icon:"Action_icon__3BtwG"}},l73F:function(e,n,t){e.exports={recorder:"NumberRecorder_recorder__3RxBH",numbers:"NumberRecorder_numbers__2L9ZB"}}},[[13,2,1,8,5,4,0,3,6,7,10,11,9,13,12,14,15,16,17,18,19]]]);