(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[37],{15:function(e,t,n){n("j36g"),e.exports=n("6l2G")},"6l2G":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[category]/[slug]",function(){return n("Yvx0")}])},"8L9l":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI"),a=n.n(r),o=n("l73F"),c=n.n(o),i=a.a.createElement,s=e=>{var{number:t}=e,{0:n,1:a}=Object(r.useState)(t),o=Object(r.useRef)(null);return Object(r.useEffect)(()=>{o.current&&n!==t&&(o.current.animate([{transform:"translateY(-1em)"},{transform:"translateY(".concat(t===n+1?-2:0,"em)")}],{duration:500,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).onfinish=()=>{a(t)})},[n,t]),i("div",{className:c.a.recorder,style:{width:"".concat(n.toString().length,"em")}},i("div",{className:c.a.numbers,ref:o},i("span",null,n-1<0?"0":n-1),i("span",null,n),i("span",null,n+1)))}},CBBT:function(e,t,n){"use strict";var r=n("wx14"),a=n("Ff2n"),o=n("q1tI"),c=n.n(o),i=n("8tEE"),s=n("IP2g"),l=n("PL58"),u=n.n(l),m=c.a.createElement;t.a=Object(o.memo)((function(e){var{actions:t=[],informs:n=[],copyright:o=!0}=e,l=Object(a.a)(e,["actions","informs","copyright"]);return m(c.a.Fragment,null,m("div",Object(r.a)({className:"note-inform"},l),n.map((e,t)=>m("span",{key:t},m(s.a,{icon:e.icon,className:u.a.icon,color:e.color}),e.name)),o&&m("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",style:{color:"currentColor"},target:"_blank"},m("span",{title:"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"},m(s.a,{icon:i.e,className:u.a.icon})))),m("div",{className:"note-action",style:{minHeight:"1rem"}},t.map((e,t)=>m("span",{key:t,style:{cursor:"pointer"},onClick:e.callback},m(s.a,{icon:e.icon,className:u.a.icon,color:e.color}),e.name))))}))},PL58:function(e,t,n){e.exports={icon:"Action_icon__3BtwG"}},SzuA:function(e,t,n){e.exports={"copyright-session":"Copyright_copyright-session__3Q0fD"}},Yvx0:function(e,t,n){"use strict";n.r(t),n.d(t,"PostView",(function(){return A}));var r=n("rePB"),a=n("QpBz"),o=n.n(a),c=n("wHSu"),i=n("zQ19"),s=n("CBBT"),l=n("ib2w"),u=n("9uS9"),m=n("q1tI"),p=n.n(m),d=n("Wgwc"),b=n.n(d),f=n("eSIs"),g=p.a.createElement,v=function(e){var{time:t}=e,n=Object(f.b)(t);return b()().diff(b()(t),"day")>60?g("blockquote",null,"\u8fd9\u7bc7\u6587\u7ae0\u4e0a\u6b21\u4fee\u6539\u4e8e ",n,"\uff0c\u53ef\u80fd\u5176\u90e8\u5206\u5185\u5bb9\u5df2\u7ecf\u53d1\u751f\u53d8\u5316\uff0c\u5982\u6709\u7591\u95ee\u53ef\u8be2\u95ee\u4f5c\u8005\u3002"):null},y=n("AauJ"),O=n("TyAF"),h=n("AoAR"),j=n("TGNx"),w=n("GArZ"),_=n("SzuA"),P=n.n(_),E=p.a.createElement,N=Object(m.memo)(e=>{var{title:t,link:n,date:r}=e;return E("section",{className:P.a["copyright-session"]},E("p",null,"\u6587\u7ae0\u6807\u9898: ",t),E("p",null,"\u6587\u7ae0\u94fe\u63a5: ",E("span",null,n)," ",E("a",{onClick:()=>{Object(w.a)(n)}},"[\u590d\u5236]")),E("p",null,"\u6700\u540e\u4fee\u6539\u65f6\u95f4: ",r),E("hr",null),E("div",null,E("p",null,"\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u7ad9\u957f\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u672c\u6587\u51fa\u5904\u53ca\u6587\u7ae0\u94fe\u63a5\uff0c\u672a\u7ecf\u7ad9\u957f\u5141\u8bb8\u4e0d\u5f97\u5bf9\u6587\u7ae0\u6587\u5b57\u5185\u5bb9\u8fdb\u884c\u4fee\u6539\u6f14\u7ece\u3002",E("br",null),"\u672c\u6587\u91c7\u7528",E("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"))))}),S=n("MaJT"),k=n("F/y2"),T=n("cBaE"),x=n("p46w"),B=n.n(x),Y=n("8L9l"),C=p.a.createElement;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var H=e=>{var t="".concat("THUMBSUP_").concat(e);return!!B.a.get(t)},A=e=>{var t,n,r,{text:a,title:p,_id:d}=e,{userStore:f}=Object(i.d)(),g=f.name,{0:O,1:w}=Object(m.useState)({}),{0:_,1:P}=Object(m.useState)({}),E=null!==(t=e.summary)&&void 0!==t?t:Object(T.e)(e.text).slice(0,150),{0:x,1:D}=Object(m.useState)((null===(n=e.count)||void 0===n?void 0:n.like)||0);Object(m.useEffect)(()=>{var t;D((null===(t=e.count)||void 0===t?void 0:t.like)||0),window.scrollTo({top:0,behavior:"smooth"})},[e]),Object(m.useEffect)(()=>{var t;w({informs:[{icon:c.H,name:g},{icon:c.e,name:b()(e.created).format("YY/MM/DD H:mm")},{icon:c.r,name:e.category.name+"".concat(e.tags&&e.tags.length>0?"["+e.tags.join("-")+"]":"")},{icon:c.d,name:null!==(t=e.count.read)&&void 0!==t?t:0}],actions:[{icon:c.l,name:"",callback:()=>{window.open(k.a.donate)}},{icon:c.F,name:C(Y.a,{number:x||0}),color:H(e._id)?"#f1c40f":void 0,callback:()=>{if(H(e._id))return o.a.error("\u4f60\u5df2\u7ecf\u652f\u6301\u8fc7\u5566!");Object(h.a)("Post").get("_thumbs-up",{params:{id:e._id}}).then(()=>{o.a.success("\u611f\u8c22\u652f\u6301!"),(e=>{var t="".concat("THUMBSUP_").concat(e);B.a.set(t,e,{expires:1})})(e._id),D(x+1)})}}],copyright:e.copyright})},[g,e,x]);var{appStore:A}=Object(i.d)();return Object(m.useEffect)(()=>(A.headerNav={title:e.title,meta:e.category.name,show:!0},()=>{A.headerNav.show=!1}),[A,e.category.name,e.title]),Object(m.useEffect)(()=>{e.copyright&&P({date:b()(e.modified).format("YYYY\u5e74MM\u6708DD\u65e5 H:mm"),title:p,link:new URL(location.pathname,k.a.url).toString()})},[e,p]),C(y.a,{title:p},C(S.b,{title:e.title,description:E,openGraph:{profile:{username:f.master.name},article:{publishedTime:e.created,modifiedTime:e.modified,section:e.category.name}}}),C(v,{time:e.modified}),C(j.a.Provider,{value:e.images},C(u.a,{value:a,escapeHtml:!1,showTOC:!0})),e.copyright?C(N,_):null,C(s.a,O),C(l.b,{type:"Post",id:d,allowComment:null===(r=e.allowComment)||void 0===r||r}))};A.getInitialProps=async e=>{var{query:t}=e,{category:n,slug:a}=t,{data:o}=await Object(h.a)("Post",n).get(a);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o)};t.default=Object(O.c)(A)},l73F:function(e,t,n){e.exports={recorder:"NumberRecorder_recorder__3RxBH",numbers:"NumberRecorder_numbers__2L9ZB"}}},[[15,1,0,7,4,3,2,5,6,8,10,11,9,13,12,14,15,16,17,18,19]]]);