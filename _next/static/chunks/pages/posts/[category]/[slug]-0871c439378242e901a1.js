_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38],{15:function(e,t,n){n("j36g"),e.exports=n("6l2G")},"6l2G":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[category]/[slug]",function(){return n("Yvx0")}])},"8L9l":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("q1tI"),o=n.n(r),c=n("l73F"),a=n.n(c),i=o.a.createElement,s=function(e){var t=e.number,n=Object(r.useState)(t),o=n[0],c=n[1],s=Object(r.useRef)(null);return Object(r.useEffect)((function(){s.current&&o!==t&&(s.current.animate([{transform:"translateY(-1em)"},{transform:"translateY(".concat(t===o+1?-2:0,"em)")}],{duration:500,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)"}).onfinish=function(){c(t)})}),[o,t]),i("div",{className:a.a.recorder,style:{width:"".concat(o.toString().length,"em")}},i("div",{className:a.a.numbers,ref:s},i("span",null,o-1<0?"0":o-1),i("span",null,o),i("span",null,o+1)))}},CBBT:function(e,t,n){"use strict";var r=n("wx14"),o=n("Ff2n"),c=n("q1tI"),a=n.n(c),i=n("8tEE"),s=n("IP2g"),u=n("PL58"),l=n.n(u),m=a.a.createElement;t.a=Object(c.memo)((function(e){var t=e.actions,n=void 0===t?[]:t,c=e.informs,u=void 0===c?[]:c,f=e.copyright,p=void 0===f||f,d=Object(o.a)(e,["actions","informs","copyright"]);return m(a.a.Fragment,null,m("div",Object(r.a)({className:"note-inform"},d),u.map((function(e,t){return m("span",{key:t},m(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name)})),p&&m("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",style:{color:"currentColor"},target:"_blank"},m("span",{title:"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"},m(s.a,{icon:i.e,className:l.a.icon})))),m("div",{className:"note-action",style:{minHeight:"1rem"}},n.map((function(e,t){return m("span",{key:t,style:{cursor:"pointer"},onClick:e.callback},m(s.a,{icon:e.icon,className:l.a.icon,color:e.color}),e.name)}))))}))},PL58:function(e,t,n){e.exports={icon:"Action_icon__3BtwG"}},SzuA:function(e,t,n){e.exports={"copyright-session":"Copyright_copyright-session__3Q0fD"}},Yvx0:function(e,t,n){"use strict";n.r(t),n.d(t,"PostView",(function(){return I}));var r=n("o0o1"),o=n.n(r),c=n("rePB"),a=n("HaE+"),i=n("QpBz"),s=n.n(i),u=n("wHSu"),l=n("zQ19"),m=n("CBBT"),f=n("ib2w"),p=n("9uS9"),d=n("q1tI"),b=n.n(d),v=n("Wgwc"),g=n.n(v),y=n("eSIs"),O=b.a.createElement,h=function(e){var t=e.time,n=Object(y.b)(t);return g()().diff(g()(t),"day")>60?O("blockquote",null,"\u8fd9\u7bc7\u6587\u7ae0\u4e0a\u6b21\u4fee\u6539\u4e8e ",n,"\uff0c\u53ef\u80fd\u5176\u90e8\u5206\u5185\u5bb9\u5df2\u7ecf\u53d1\u751f\u53d8\u5316\uff0c\u5982\u6709\u7591\u95ee\u53ef\u8be2\u95ee\u4f5c\u8005\u3002"):null},j=n("AauJ"),w=n("TyAF"),_=n("AoAR"),P=n("TGNx"),E=n("GArZ"),N=n("SzuA"),k=n.n(N),S=b.a.createElement,x=Object(d.memo)((function(e){var t=e.title,n=e.link,r=e.date;return S("section",{className:k.a["copyright-session"]},S("p",null,"\u6587\u7ae0\u6807\u9898: ",t),S("p",null,"\u6587\u7ae0\u94fe\u63a5: ",S("span",null,n)," ",S("a",{onClick:function(){Object(E.a)(n)}},"[\u590d\u5236]")),S("p",null,"\u6700\u540e\u4fee\u6539\u65f6\u95f4: ",r),S("hr",null),S("div",null,S("p",null,"\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u7ad9\u957f\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u672c\u6587\u51fa\u5904\u53ca\u6587\u7ae0\u94fe\u63a5\uff0c\u672a\u7ecf\u7ad9\u957f\u5141\u8bb8\u4e0d\u5f97\u5bf9\u6587\u7ae0\u6587\u5b57\u5185\u5bb9\u8fdb\u884c\u4fee\u6539\u6f14\u7ece\u3002",S("br",null),"\u672c\u6587\u91c7\u7528",S("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},"\u521b\u4f5c\u5171\u7528\u4fdd\u7559\u7f72\u540d-\u975e\u5546\u4e1a-\u7981\u6b62\u6f14\u7ece4.0\u56fd\u9645\u8bb8\u53ef\u8bc1"))))})),T=n("MaJT"),B=n("F/y2"),H=n("cBaE"),Y=n("p46w"),C=n.n(Y),D=n("8L9l"),A=b.a.createElement;function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(e){var t="".concat("THUMBSUP_").concat(e);return!!C.a.get(t)},I=function(e){var t,n,r,o=e.text,c=e.title,a=e._id,i=Object(l.d)().userStore,b=i.name,v=Object(d.useState)({}),y=v[0],O=v[1],w=Object(d.useState)({}),E=w[0],N=w[1],k=null!==(t=e.summary)&&void 0!==t?t:Object(H.e)(e.text).slice(0,150),S=Object(d.useState)((null===(n=e.count)||void 0===n?void 0:n.like)||0),Y=S[0],F=S[1];Object(d.useEffect)((function(){var t;F((null===(t=e.count)||void 0===t?void 0:t.like)||0),window.scrollTo({top:0,behavior:"smooth"})}),[e]),Object(d.useEffect)((function(){var t;O({informs:[{icon:u.H,name:b},{icon:u.e,name:g()(e.created).format("YY/MM/DD H:mm")},{icon:u.r,name:e.category.name+"".concat(e.tags&&e.tags.length>0?"["+e.tags.join("-")+"]":"")},{icon:u.d,name:null!==(t=e.count.read)&&void 0!==t?t:0}],actions:[{icon:u.l,name:"",callback:function(){window.open(B.a.donate)}},{icon:u.F,name:A(D.a,{number:Y||0}),color:G(e._id)?"#f1c40f":void 0,callback:function(){if(G(e._id))return s.a.error("\u4f60\u5df2\u7ecf\u652f\u6301\u8fc7\u5566!");Object(_.a)("Post").get("_thumbs-up",{params:{id:e._id}}).then((function(){s.a.success("\u611f\u8c22\u652f\u6301!"),function(e){var t="".concat("THUMBSUP_").concat(e);C.a.set(t,e,{expires:1})}(e._id),F(Y+1)}))}}],copyright:e.copyright})}),[b,e,Y]);var M=Object(l.d)().appStore;return Object(d.useEffect)((function(){return M.headerNav={title:e.title,meta:e.category.name,show:!0},function(){M.headerNav.show=!1}}),[M,e.category.name,e.title]),Object(d.useEffect)((function(){e.copyright&&N({date:g()(e.modified).format("YYYY\u5e74MM\u6708DD\u65e5 H:mm"),title:c,link:new URL(location.pathname,B.a.url).toString()})}),[e,c]),A(j.a,{title:c},A(T.b,{title:e.title,description:k,openGraph:{profile:{username:i.master.name},article:{publishedTime:e.created,modifiedTime:e.modified,section:e.category.name}}}),A(h,{time:e.modified}),A(P.a.Provider,{value:e.images},A(p.a,{value:o,escapeHtml:!1,showTOC:!0})),e.copyright?A(x,E):null,A(m.a,y),A(f.b,{type:"Post",id:a,allowComment:null===(r=e.allowComment)||void 0===r||r}))};I.getInitialProps=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,c,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,r=n.category,c=n.slug,e.next=4,Object(_.a)("Post",r).get(c);case 4:return a=e.sent,i=a.data,e.abrupt("return",M({},i));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=Object(w.c)(I)},l73F:function(e,t,n){e.exports={recorder:"NumberRecorder_recorder__3RxBH",numbers:"NumberRecorder_numbers__2L9ZB"}}},[[15,2,1,8,5,4,0,3,6,7,9,11,12,10,14,13,15,16,17,18,19,20]]]);