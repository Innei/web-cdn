(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851,818],{3724:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[category]/[slug]",function(){return c(73871)}])},91361:function(c,b,a){"use strict";a.d(b,{q:function(){return h}});var d=a(11527),e=a(11048),f=a(50959),g=a(85574);function h(a,b){return(0,e.Pi)(function(c){var e=a.get(c.id);return((0,f.useEffect)(function(){a.add(c)},[c.id]),e)?(0,d.jsx)(b,{id:e.id}):(0,d.jsx)(g.g,{})})}},88198:function(c,b,a){"use strict";a.d(b,{i:function(){return j},x:function(){return k}});var d=a(11527),e=a(45924);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){f(d,a,c[a])})}return d}function h(a,d){if(null==a)return{};var b,c,e=i(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}function i(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}var j=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("hr",g({className:(0,e.W)("border-0 h-[0.5px] my-4 !bg-opacity-30 bg-black dark:bg-white",b)},c))},k=function(a){var b=a.className,c=h(a,["className"]);return(0,d.jsx)("span",g({className:(0,e.W)("!bg-opacity-30 bg-black dark:bg-white inline-block h-full mx-4 w-[0.5px] text-transparent",b)},c,{children:"w"}))}},91075:function(e,b,a){"use strict";a.d(b,{Z:function(){return i}});var f=a(11527),c=a(50959),d=a(90662),g=a.n(d),h=function(a){var e=a.children,b=a.serverEl,d=(0,c.useState)(!1),g=d[0],h=d[1];return(0,c.useEffect)(function(){h(!0)},[]),(0,f.jsx)(f.Fragment,{children:g?e:b?c.createElement(b):null})},i=(0,c.memo)(function(a){return(0,f.jsx)(h,{children:(0,f.jsx)(g(),{value:a.number,transition:500,className:a.className})})})},33954:function(e,b,a){"use strict";a.d(b,{B:function(){return l}});var f=a(11527),g=a(45924),c=a(50959),h=a(61432),i=a(18833),d=a(63792),j=a.n(d);function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var l=(0,c.memo)(function(a){var b=a.actions,d=a.informs,e=a.copyright,l=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,["actions","informs","copyright"]);return(0,f.jsxs)("div",{className:j().root,children:[(0,f.jsxs)("div",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}({className:"note-inform space-x-3"},l,{children:[(void 0===d?[]:d).map(function(a,b){var d=(0,f.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[a.icon&&(0,f.jsx)("span",{className:"flex items-center mr-2",style:{color:a.color},children:a.icon}),a.name]});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return d},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):d},b)}),(void 0===e||e)&&(0,f.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",target:"_blank",className:"inline-flex items-center text-current cursor-pointer",children:(0,f.jsx)("span",{title:"\u521B\u4F5C\u5171\u7528\u4FDD\u7559\u7F72\u540D-\u975E\u5546\u4E1A-\u7981\u6B62\u6F14\u7ECE4.0\u56FD\u9645\u8BB8\u53EF\u8BC1",className:"inline-flex items-center",children:(0,f.jsx)(i.w2,{})})})]})),(0,f.jsx)("div",{className:"note-action min-h-4 space-x-4","data-hide-print":!0,children:(void 0===b?[]:b).map(function(a,b){if(!a)return null;var d=a.wrapperComponent||c.Fragment,e=(0,f.jsx)("span",{className:(0,g.W)(!!a.callback&&"cursor-pointer","inline-flex items-center space-x-2"),onClick:a.callback,children:(0,f.jsxs)(d,{children:[a.icon&&(0,f.jsx)("span",{className:"inline-flex items-center",style:{color:a.color},children:a.icon}),a.name]})});return(0,f.jsx)(c.Fragment,{children:a.tip?(0,f.jsx)(h.r,{triggerComponent:function(){return e},wrapperClassNames:"inline-flex items-center",children:m(a.tip)}):e},b)})})]})}),m=function(a){return"function"==typeof a?(0,c.createElement)(a):a}},21510:function(c,b,a){"use strict";a.d(b,{E:function(){return j}});var d=a(11527),e=a(50959),f=a(48629),g=a(56299),h=a(61432),i=a(48259),j=(0,a(26358).$)(function(c){var a=(0,i.LU)().function.donate.qrcode,b=void 0===a?[]:a,j=(0,e.useMemo)(function(){return(0,d.jsx)(d.Fragment,{children:c.children})},[c.children]);return b.length?(0,d.jsx)(h.r,{wrapperClassNames:"inline-flex items-center",middleware:[(0,f.X5)({autoAlignment:!0}),(0,f.uY)(),(0,f.cv)(10),],triggerComponent:function(){return j},children:(0,d.jsx)(g.X,{trackerMessage:"\u66DD\u5149 - \u8D44\u52A9\u5F39\u5C42",children:(0,d.jsx)("div",{className:"flex space-x-2",children:b.map(function(a){return(0,d.jsx)("img",{src:a,className:"w-[300px]"},a)})})})}):j})},73871:function(p,c,a){"use strict";a.r(c),a.d(c,{PostView:function(){return o},"default":function(){return ai}});var f=a(10025),g=a.n(f),q=a(11527),r=a(49083),h=a(71384),s=a.n(h),t=a(50279),u=a(65280),b=a(11048),i=a(17621),v=a.n(i),w=a(41221),x=a(50959),y=a(94788),j=a(91361),z=a(48655),A=a(88198),k=a(41548),B=(0,b.Pi)(function(c){var a,b=k.h.postStore.get(c.id);return b&&(null===(a=b.related)|| void 0===a?void 0:a.length)?(0,q.jsxs)("div",{"data-hide-print":!0,children:[(0,q.jsx)(A.i,{className:"ml-auto mr-auto w-46"}),(0,q.jsx)("h3",{className:"font-medium text-lg",children:(0,q.jsx)("span",{children:"\u76F8\u5173\u6587\u7AE0"})}),(0,q.jsx)("ul",{children:b.related.map(function(a){return(0,q.jsx)("li",{children:(0,q.jsx)(v(),{href:"/posts/".concat(a.category.slug,"/").concat(a.slug),children:(0,q.jsx)("a",{className:"leading-10 underline-current underline underline-dashed",children:a.title})})},a.id)})})]}):null}),C=a(30974),D=a(18833),E=a(56625),F=a(91075),G=a(4345),H=a(45924);function I(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var J={warning:function(a){return(0,q.jsx)("svg",function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){I(d,a,c[a])})}return d}({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 28 28"},a,{children:(0,q.jsx)("path",{fill:"currentColor",d:"M14 10.55a.75.75 0 0 1 .75.75v5a.75.75 0 0 1-1.5 0v-5a.75.75 0 0 1 .75-.75Zm0 10a1 1 0 1 0 0-2a1 1 0 0 0 0 2ZM12.039 5.207c.86-1.53 3.062-1.53 3.922 0l8.685 15.44c.844 1.5-.24 3.353-1.96 3.353H5.314c-1.721 0-2.805-1.853-1.961-3.353l8.685-15.44Zm2.615.735a.75.75 0 0 0-1.308 0l-8.685 15.44a.75.75 0 0 0 .654 1.118h17.37a.75.75 0 0 0 .654-1.118l-8.685-15.44Z"})}))}},K={warning:"bg-amber-50"},L={warning:"border-amber-300"},M={warning:"text-amber-500"},N=function(a){var b=J[a.type];return(0,q.jsxs)("div",{className:(0,H.W)("p-6 flex justify-center items-center space-x-4 rounded-md border text-dark-100 "+"".concat(K[a.type]," ").concat(L[a.type]),a.className),children:[(0,q.jsx)(b,{className:"text-3xl ".concat(M[a.type])}),a.message?(0,q.jsx)("span",{className:"leading-[1.8]",children:a.message}):a.children]})};function O(b){var a=b.time;return s()().diff(s()(a),"day")>60?(0,q.jsx)(N,{type:"warning",className:"mb-10",children:(0,q.jsxs)("span",{className:"leading-[1.8]",children:["\u8FD9\u7BC7\u6587\u7AE0\u4E0A\u6B21\u4FEE\u6539\u4E8E ",(0,q.jsx)(G.i,{date:new Date(a)}),"\uFF0C\u53EF\u80FD\u90E8\u5206\u5185\u5BB9\u5DF2\u7ECF\u4E0D\u9002\u7528\uFF0C\u5982\u6709\u7591\u95EE\u53EF\u8BE2\u95EE\u4F5C\u8005\u3002"]})}):null}var P=a(33954),Q=a(19129),R=a(21510),S=a(83958),T=a(39960),U=a(48259),V=a(25977),W=a(24152),X=a(75779),Y=a(54486),d=a(47742),Z=a(81425),$=a(81710),_=a(50225),aa=a(91384),l=a(305),ab=a.n(l),ac=(0,b.Pi)(function(a){var c=a.title,d=a.link,b=a.date,e=(0,k.oR)(),f=e.userStore.name;return(0,q.jsxs)("section",{className:ab()["copyright-session"],id:"copyright",children:[(0,q.jsxs)("p",{children:["\u6587\u7AE0\u6807\u9898: ",c]}),(0,q.jsxs)("p",{children:["\u6587\u7AE0\u4F5C\u8005: ",f]}),(0,q.jsxs)("p",{children:["\u6587\u7AE0\u94FE\u63A5: ",(0,q.jsx)("span",{children:d})," ",(0,q.jsx)("a",{onClick:function(){navigator.clipboard.writeText(d)},"data-hide-print":!0,children:"[\u590D\u5236]"})]}),(0,q.jsxs)("p",{children:["\u6700\u540E\u4FEE\u6539\u65F6\u95F4:"," ",b?s()(b).format("YYYY\u5E74MM\u6708DD\u65E5 H:mm"):"\u6682\u6CA1\u6709\u4FEE\u6539\u8FC7"]}),(0,q.jsx)(A.i,{}),(0,q.jsx)("div",{children:(0,q.jsxs)("p",{children:["\u5546\u4E1A\u8F6C\u8F7D\u8BF7\u8054\u7CFB\u7AD9\u957F\u83B7\u5F97\u6388\u6743\uFF0C\u975E\u5546\u4E1A\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u672C\u6587\u51FA\u5904\u53CA\u6587\u7AE0\u94FE\u63A5\uFF0C\u672A\u7ECF\u7AD9\u957F\u5141\u8BB8\u4E0D\u5F97\u5BF9\u6587\u7AE0\u6587\u5B57\u5185\u5BB9\u8FDB\u884C\u4FEE\u6539\u6F14\u7ECE\u3002",(0,q.jsx)("br",{}),"\u672C\u6587\u91C7\u7528",(0,q.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",children:"\u521B\u4F5C\u5171\u7528\u4FDD\u7559\u7F72\u540D-\u975E\u5546\u4E1A-\u7981\u6B62\u6F14\u7ECE4.0\u56FD\u9645\u8BB8\u53EF\u8BC1"})]})})]})});function ad(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function ae(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var m,n,af=d.D2,ag=d.MO,ah=function(c){var b,a=k.h.postStore.get(c),d=(0,x.useRef)(),e=(0,w.useRouter)();(0,x.useEffect)(function(){var c,b=d.current;if(!b&&a){d.current=(0,u.ZN)(a);return}if(b&&a){if(b.id===a.id){if((0,t.Z)(b,a))return;if(b.categoryId!==a.categoryId||b.slug!==a.slug&&(null===(c=a.category)|| void 0===c?void 0:c.slug)){e.replace("/posts/"+"".concat(a.category.slug,"/").concat(a.slug),void 0,{shallow:!0,scroll:!1});return}if(a.isDeleted){e.push("/posts"),y.yw.error("\u6587\u7AE0\u5DF2\u5220\u9664\u6216\u9690\u85CF");return}y.yw.info("\u6587\u7AE0\u5DF2\u66F4\u65B0")}d.current=(0,u.ZN)(a)}},[null==a?void 0:a.id,null==a?void 0:a.slug,null==a?void 0:a.categoryId,null==a?void 0:a.text,null==a?void 0:a.summary,null==a?void 0:null===(b=a.category)|| void 0===b?void 0:b.slug,null==a?void 0:a.isDeleted,])},o=(0,b.Pi)(function(f){var b,c,m,a=(0,k.oR)().postStore.get(f.id)||aa.ZT,d=(0,x.useState)({}),g=d[0],n=d[1],h=null!==(b=a.summary)&& void 0!==b?b:(0,$.D)(a.text).slice(0,150),e=(0,U.LU)().function.donate,i=(0,U.L6)().url.webUrl;(0,x.useEffect)(function(){(0,_.YG)()},[a.id]);var j=s()(a.created).locale("cn").format("YYYY\u5E74M\u6708D\u65E5");(0,x.useEffect)(function(){var b,c;n({informs:[{icon:(0,q.jsx)(D.EP,{}),name:j},{icon:(0,q.jsx)(D.n_,{}),name:"".concat(a.category.name).concat(a.tags.length?"[".concat(a.tags[0],"]"):""),tip:function(){return(0,q.jsxs)("div",{className:"leading-7",children:[(0,q.jsxs)("p",{children:["\u5206\u7C7B\uFF1A",(0,q.jsx)(v(),{href:"/categories/".concat(a.category.slug),children:(0,q.jsx)("a",{children:a.category.name})})]}),(0,q.jsx)("p",{children:a.tags.length?"\u6807\u7B7E\uFF1A".concat(a.tags.join(", ")):""})]})}},{icon:(0,q.jsx)(D.NM,{}),name:null!==(c=a.count.read)&& void 0!==c?c:0},],actions:[e.enable&&{icon:(0,q.jsx)(D.j,{}),name:"",wrapperComponent:R.E,callback:function(){window.open(e.link)}},{icon:(0,q.jsx)(D.UB,{}),name:(0,q.jsx)("span",{className:"leading-[1.1] inline-flex items-center",children:(0,q.jsx)(F.Z,{number:(null===(b=a.count)|| void 0===b?void 0:b.like)||0})}),color:ag(a.id)?"#f1c40f":void 0,callback:function(){if(ag(a.id))return y.yw.error("\u4F60\u5DF2\u7ECF\u652F\u6301\u8FC7\u5566!");Y.x.post.thumbsUp(a.id).then(function(){y.yw.success("\u611F\u8C22\u652F\u6301!"),af(a.id),a.count.like=a.count.like+1})}},],copyright:a.copyright})},[a.id,a.category.name,a.copyright,a.count.read,a.tags,e.enable,e.link,a.count.like,a.count,j,a.category.slug,]),(0,T.Z)(a.title,a.category.name),(0,T.Q)(a.title,a.text),ah(a.id),(0,X.e9)(.2),(0,W.h)(a.id);var l=(0,V.O)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.p,{title:a.title,description:h,openGraph:{type:"article",article:{publishedTime:a.created,modifiedTime:a.modified||void 0,section:a.category.name,tags:null!==(c=a.tags)&& void 0!==c?c:[]}}}),(0,q.jsxs)(C.B,{title:a.title,id:a.id,type:"post",titleAnimate:!1,children:[(0,x.useMemo)(function(){return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(O,{time:a.modified||a.created}),(0,q.jsx)(r.Qd.Provider,{value:(0,Z.Gj)(a.images),children:(0,q.jsxs)("article",{children:[(0,q.jsx)("h1",{className:"sr-only",children:a.title}),(0,q.jsx)(E.U,{codeBlockFully:!0,value:a.text,escapeHtml:!1,toc:!0})]})}),(0,q.jsx)(B,{id:a.id}),a.copyright&&l?(0,q.jsx)(ac,{date:a.modified,link:new URL(location.pathname,i).toString(),title:a.title}):null,(0,q.jsx)(P.B,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){ae(d,a,c[a])})}return d}({},g)),(0,q.jsx)(Q.p,{id:a.id,allowComment:null===(m=a.allowComment)|| void 0===m||m},a.id)]})},[g,a.allowComment,a.copyright,a.created,a.id,a.images,a.modified,a.text,a.title,i,l,]),(0,q.jsx)(S.SearchFAB,{})]})]})}),e=(0,j.q)(k.h.postStore,o);e.getInitialProps=(n=(m=g().mark(function a(b){var c,d,e,f;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=(c=b.query).category,e=c.slug,a.next=4,k.h.postStore.fetchBySlug(d,e);case 4:return f=a.sent,a.abrupt("return",f);case 6:case"end":return a.stop()}},a)}),function(){var a=this,b=arguments;return new Promise(function(d,e){var f=m.apply(a,b);function c(a){ad(f,d,e,c,g,"next",a)}function g(a){ad(f,d,e,c,g,"throw",a)}c(void 0)})}),function(a){return n.apply(this,arguments)});var ai=e},81710:function(d,b,a){"use strict";a.d(b,{D:function(){return f}});var c=a(85606),e=a.n(c);function f(d){var a=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{count:!1,length:150},b=e()(d,{gfm:!0}),c=b.slice(0,a.length).replace(/[\s]/gm," ");return a.count?{description:c,wordCount:b.length}:c}},63792:function(a){a.exports={icon:"ArticleAction_icon__gRaNV",root:"ArticleAction_root__ZBwKD"}},305:function(a){a.exports={"copyright-session":"Copyright_copyright-session__UTT9k"}}},function(a){a.O(0,[621,674,707,243,780,0,697,32,672,833,625,623,136,958,519,774,888,179],function(){return a(a.s=3724)}),_N_E=a.O()}])