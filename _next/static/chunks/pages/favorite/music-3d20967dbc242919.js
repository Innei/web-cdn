(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{2463:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favorite/music",function(){return c(37401)}])},85574:function(e,b,a){"use strict";a.d(b,{g:function(){return i}});var f=a(11527),c=a(50959),g=a(11530),d=a(63641),h=a.n(d),i=(0,c.memo)(function(b){var d=b.loadingText,a=(0,c.useState)(!0),e=a[0],j=a[1],i=(0,g.YD)({threshold:.5,onChange:function(a){a?j(!1):j(!0)}}).ref;return(0,f.jsxs)("div",{className:h().loading,ref:i,children:[(0,f.jsx)("div",{className:"icon",children:(0,f.jsx)("svg",{className:"m-auto bg-transparent block",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:(0,f.jsx)("circle",{cx:"50",cy:"51.3828",r:"13",fill:"#e15b64",children:!e&&(0,f.jsx)("animate",{attributeName:"cy",dur:"1s",repeatCount:"indefinite",calcMode:"spline",keySplines:"0.45 0 0.9 0.55;0 0.45 0.55 0.9",keyTimes:"0;0.5;1",values:"23;77;23"})})})},"icon"),(0,f.jsx)("span",{children:d})]})})},37401:function(f,b,a){"use strict";a.r(b),a.d(b,{"default":function(){return w}});var g=a(11527),d=a(50959),h=a(94788),i=a(45924),j=a(65280),c=a(11048),k=a(48655),l=a(18833),m=a(9594),n=a(18921),o=a(41548),e=a(82311),p=a.n(e);function q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var r=(0,d.memo)(function(a){var b=(0,o.oR)().musicStore,c=(0,n.ez)().event,d=function(a){(0,j.z)(function(){c({action:m.b.Interaction,label:"\u52A0\u8F7D\u97F3\u4E50\u64AD\u653E\u5217\u8868\uFF0CID\uFF1A".concat(a.join(","))}),b.setPlaylist(a),b.isHide=!1,setTimeout(function(){b.isPlay=!0},1e3)})};return(0,g.jsxs)("section",{className:p()["kami-music"],children:[(0,g.jsx)("div",{className:p()["music-cover"],children:(0,g.jsxs)("div",{className:(0,i.W)(p()["fixed-cover"],p()["sticky-cover"]),children:[(0,g.jsx)("img",{src:a.src}),(0,g.jsx)("h3",{className:"leading-[1.8]",children:a.name})]})}),(0,g.jsx)("div",{className:p()["music-list"],children:(0,g.jsx)("ul",{children:a.data.length?a.data.map(function(b,c){return(0,g.jsx)(s,{index:c,name:b.name,time:b.time,id:b.id,onClick:function(b){d(a.data.slice(b).map(function(a){return a.id}))}},b.id)}):(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:p().num,children:"0"}),"\u8FD9\u91CC\u6682\u65F6\u6CA1\u6709\u5185\u5BB9"]})})})]})}),s=(0,c.Pi)(function(a){var b=a.index,c=a.name,d=a.time,e=(0,o.oR)().musicStore,f=e.playId;return f===a.id?(0,g.jsx)(t,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){q(d,a,c[a])})}return d}({},a)):(0,g.jsxs)("li",{onClick:function(){return a.onClick(b)},className:(0,i.W)(p()["song-item"]),children:[(0,g.jsx)("span",{className:p().num,children:b+1}),(0,g.jsx)("span",{className:"flex-grow truncate",children:c}),(0,g.jsx)("time",{className:"font-mono flex-shrink-0",children:d})]})}),t=(0,c.Pi)(function(a){var r=a.index,e=a.name,f=a.time,b=(0,o.oR)().musicStore,c=b.playId,h=b.duration,j=b.time,s=(0,n.ez)().event,q=(0,d.useDeferredValue)(b.playProgress);return(0,d.useEffect)(function(){if(0===c)return},[c]),(0,d.useEffect)(function(){s({action:m.b.Interaction,label:"\u5F00\u59CB\u64AD\u653E\u97F3\u4E50\uFF1A".concat(c)})},[c]),(0,g.jsxs)("li",{onClick:function(){return a.onClick(r)},className:(0,i.W)(p()["song-item"],c===a.id&&h&&j?p().playing:null),style:{backgroundSize:"".concat(100*q,"% 100%")},children:[(0,g.jsx)(k.p,{title:"".concat(a.name," \xb7 \u6B4C\u5355")}),(0,d.useMemo)(function(){return(0,g.jsx)("span",{className:p().num,children:b.isPlay?(0,g.jsx)(l.RZ,{className:"inline"}):(0,g.jsx)(l.fp,{className:"inline"})})},[b.isPlay]),(0,g.jsx)("span",{className:"flex-grow truncate",children:e}),(0,g.jsx)("time",{className:"font-mono flex-shrink-0",children:f})]})}),u=a(85574),v=a(54486),w=function(){var b=(0,d.useState)(null),a=b[0],e=b[1];(0,d.useEffect)(function(){v.x.serverless.proxy.kami.netease.get().then(function(a){e(a)}).catch(function(a){h.yw.error(a.message)})},[]);var f=(0,n.ez)().event,c=(0,d.useCallback)(function(){f({action:m.b.Click,label:"\u97F3\u4E50\u9875\u9762\u70B9\u51FB\u53BB\u4E2A\u4EBA\u4E3B\u9875"})},[]);return a?(0,g.jsxs)("main",{children:[(0,g.jsx)(k.p,{title:"\u6B4C\u5355"}),a.detail&&(0,g.jsx)("div",{className:"flex my-2 justify-end phone:justify-center",children:(0,g.jsxs)("a",{href:"https://music.163.com/#/user/home?id=".concat(a.detail.userId),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center phone:flex-col phone:space-y-4 phone:mb-4",onClick:c,children:[(0,g.jsx)(l.f3,{height:"3rem",width:"3rem"}),(0,g.jsx)("span",{className:"ml-2",children:a.detail.nickname})]})}),(0,g.jsx)(r,{name:"\u5468\u6392\u884C",src:"https://p3.music.126.net/4HGEnXVexEfBACKi7wbq8A==/3390893860854924.jpg",data:a.weekdata}),(0,g.jsx)(r,{name:"\u603B\u6392\u884C",data:a.alldata,src:"https://p1.music.126.net/xTCCKfCJuEh2ohPZDNMDLw==/19193074975054252.jpg"}),(0,g.jsx)(r,{name:a.playlist.name,src:a.playlist.coverImgUrl,data:a.playlist.data.slice(0,10)})]}):(0,g.jsx)(u.g,{})}},82311:function(a){a.exports={"kami-music":"SectionMusic_kami-music__njcLu","sticky-cover":"SectionMusic_sticky-cover__73E_7","music-list":"SectionMusic_music-list__a8CTZ","song-item":"SectionMusic_song-item__3SSVt",num:"SectionMusic_num__w2I13",playing:"SectionMusic_playing__vHAOP",active:"SectionMusic_active__ttcvK","music-cover":"SectionMusic_music-cover__010Gd","fixed-cover":"SectionMusic_fixed-cover__Gljcm",fixed:"SectionMusic_fixed__H6rDt",bottom:"SectionMusic_bottom__MT7NB"}},63641:function(a){a.exports={loading:"Loading_loading__7nOdi"}},11530:function(d,b,a){"use strict";a.d(b,{YD:function(){return m}});var c=a(50959);function e(){return(e=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}let f=new Map,g=new WeakMap,h=0,i;function j(a,j,b={},c=i){if(void 0===window.IntersectionObserver&& void 0!==c){let d=a.getBoundingClientRect();return j(c,{isIntersecting:c,target:a,intersectionRatio:"number"==typeof b.threshold?b.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}let{id:m,observer:l,elements:e}=function(a){var d;let c=(d=a,Object.keys(d).sort().filter(a=>void 0!==d[a]).map(b=>{var a;return`${b}_${"root"===b?(a=d.root)?(g.has(a)||(h+=1,g.set(a,h.toString())),g.get(a)):"0":d[b]}`}).toString()),b=f.get(c);if(!b){let i=new Map,j,e=new IntersectionObserver(b=>{b.forEach(b=>{var c;let d=b.isIntersecting&&j.some(a=>b.intersectionRatio>=a);a.trackVisibility&& void 0===b.isVisible&&(b.isVisible=d),null==(c=i.get(b.target))||c.forEach(a=>{a(d,b)})})},a);j=e.thresholds||(Array.isArray(a.threshold)?a.threshold:[a.threshold||0]),b={id:c,observer:e,elements:i},f.set(c,b)}return b}(b),k=e.get(a)||[];return e.has(a)||e.set(a,k),k.push(j),l.observe(a),function(){k.splice(k.indexOf(j),1),0===k.length&&(e.delete(a),l.unobserve(a)),0===e.size&&(l.disconnect(),f.delete(m))}}function k(a){return"function"!=typeof a.children}class l extends c.Component{constructor(a){super(a),this.node=null,this._unobserveCb=null,this.handleNode=a=>{!this.node||(this.unobserve(),a||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=a||null,this.observeNode()},this.handleChange=(a,b)=>{a&&this.props.triggerOnce&&this.unobserve(),k(this.props)||this.setState({inView:a,entry:b}),this.props.onChange&&this.props.onChange(a,b)},this.state={inView:!!a.initialInView,entry:void 0}}componentDidUpdate(a){(a.rootMargin!==this.props.rootMargin||a.root!==this.props.root||a.threshold!==this.props.threshold||a.skip!==this.props.skip||a.trackVisibility!==this.props.trackVisibility||a.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;let{threshold:a,root:b,rootMargin:c,trackVisibility:d,delay:e,fallbackInView:f}=this.props;this._unobserveCb=j(this.node,this.handleChange,{threshold:a,root:b,rootMargin:c,trackVisibility:d,delay:e},f)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!k(this.props)){let{inView:b,entry:c}=this.state;return this.props.children({inView:b,entry:c,ref:this.handleNode})}let a=this.props,{children:d,as:f}=a,g=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],null.indexOf(a)>=0||(d[a]=c[a]);return d}(a,null);return React.createElement(f||"div",e({ref:this.handleNode},g),d)}}function m({threshold:b,delay:e,trackVisibility:f,rootMargin:g,root:h,triggerOnce:i,skip:k,initialInView:l,fallbackInView:m,onChange:n}={}){let q=c.useRef(),o=c.useRef(),[d,r]=c.useState({inView:!!l});o.current=n;let p=c.useCallback(a=>{void 0!==q.current&&(q.current(),q.current=void 0),!k&&a&&(q.current=j(a,(b,a)=>{r({inView:b,entry:a}),o.current&&o.current(b,a),a.isIntersecting&&i&&q.current&&(q.current(),q.current=void 0)},{root:h,rootMargin:g,threshold:b,trackVisibility:f,delay:e},m))},[Array.isArray(b)?b.toString():b,h,g,i,k,f,m,e]);c.useEffect(()=>{q.current||!d.entry||i||k||r({inView:!!l})});let a=[p,d.inView,d.entry];return a.ref=a[0],a.inView=a[1],a.entry=a[2],a}}},function(a){a.O(0,[833,774,888,179],function(){return a(a.s=2463)}),_N_E=a.O()}])